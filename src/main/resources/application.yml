server:
  port: 8080
  forward-headers-strategy: framework

spring:
  application:
    name: agentic-itinerary-planner
  jackson:
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false
    deserialization:
      FAIL_ON_UNKNOWN_PROPERTIES: false
  main:
    allow-bean-definition-overriding: true
  mail:
    host: ${SMTP_HOST:smtp.gmail.com}
    port: ${SMTP_PORT:587}
    username: ${SMTP_USERNAME:}
    password: ${SMTP_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
          ssl:
            trust: "*"
  # Remove JPA/H2 completely; exclude autoconfiguration
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration
  # Security completely disabled for development
  security:
    user:
      name: disabled
      password: disabled
      roles: DISABLED

google:
  ai:
    api-key: ${GEMINI_API_KEY:}
    model: ${GEMINI_MODEL:gemini-2.5-flash}
    temperature: ${GEMINI_TEMPERATURE:0.7}
    max-tokens: ${GEMINI_MAX_TOKENS:65535}
    mock-mode: ${GEMINI_MOCK_MODE:false}
  places:
    api:
      key: ${GOOGLE_PLACES_API_KEY:}
    daily:
      limit: ${GOOGLE_PLACES_DAILY_LIMIT:1000}
    rate-limit:
      enabled: ${GOOGLE_PLACES_RATE_LIMIT_ENABLED:true}

ai:
  provider: ${AI_PROVIDER:openrouter}
  model: ${AI_MODEL:qwen/qwen-2.5-72b-instruct:free }
  temperature: ${AI_TEMPERATURE:0.7}
  max-tokens: ${AI_MAX_TOKENS:8192}
  mock-mode: ${AI_MOCK_MODE:false}


openrouter:
  api-key: ${OPENROUTER_API_KEY:}
  base-url: ${OPENROUTER_BASE_URL:https://openrouter.ai/api/v1}
  timeout-seconds: ${OPENROUTER_TIMEOUT_SECONDS:150}

# Firestore Configuration
firestore:
  project-id: ${FIRESTORE_PROJECT_ID:tripaiplanner-4c951}
  credentials: ${FIRESTORE_CREDENTIALS:}
  credentials-file: ${FIRESTORE_CREDENTIALS_FILE:}
  emulator-host: ${FIRESTORE_EMULATOR_HOST:localhost:8080}
  use-emulator: ${FIRESTORE_USE_EMULATOR:false}
  enabled: ${FIRESTORE_ENABLED:true}

# Firebase Authentication Configuration
firebase:
  auth:
    enabled: ${FIREBASE_AUTH_ENABLED:true}

# Application Database Configuration moved under single app block below

razorpay:
  enabled: ${RAZORPAY_ENABLED:false}
  key-id: ${RAZORPAY_KEY_ID:}
  key-secret: ${RAZORPAY_KEY_SECRET:}
  webhook-secret: ${RAZORPAY_WEBHOOK_SECRET:}
  environment: ${RAZORPAY_ENVIRONMENT:test}
  rate-limit:
    enabled: ${RAZORPAY_RATE_LIMIT_ENABLED:true}
  timeout: ${RAZORPAY_TIMEOUT:30000}

expedia:
  api:
    key: ${EXPEDIA_API_KEY:}
  rate-limit:
    enabled: ${EXPEDIA_RATE_LIMIT_ENABLED:true}
  timeout: ${EXPEDIA_TIMEOUT:30000}

booking:
  com:
    api:
      key: ${BOOKING_COM_API_KEY:}
    partner:
      id: ${BOOKING_COM_PARTNER_ID:}
  timeout: ${BOOKING_COM_TIMEOUT:30000}

email:
  smtp:
    host: ${SMTP_HOST:smtp.gmail.com}
    port: ${SMTP_PORT:587}
    username: ${SMTP_USERNAME:}
    password: ${SMTP_PASSWORD:}
    from: ${EMAIL_FROM:noreply@example.com}
    from-name: ${EMAIL_FROM_NAME:Agentic Itinerary Planner}

pdf:
  base-url: ${PDF_BASE_URL:http://localhost:8080}
  template-path: ${PDF_TEMPLATE_PATH:classpath:/templates/pdf/}



management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when_authorized
  metrics:
    export:
      prometheus:
        enabled: ${PROMETHEUS_ENABLED:false}

logging:
  level:
    root: ${LOG_LEVEL:INFO}
    com.tripplanner: ${APP_LOG_LEVEL:INFO}
    com.tripplanner.service: INFO
    com.tripplanner.data: INFO
    com.tripplanner.service.agents: INFO
    org.springframework.security: ${SECURITY_LOG_LEVEL:DEBUG}
    org.springframework.web: DEBUG
    com.google.cloud: ${GCP_LOG_LEVEL:INFO}
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping: DEBUG
    org.springframework.web.cors: DEBUG
    org.springframework.web.filter.CorsFilter: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n"
  file:
    name: ${LOG_FILE:logs/application.log}



app:
  base-url: ${APP_BASE_URL:http://localhost:8080}
  max-itinerary-days: ${MAX_ITINERARY_DAYS:30}

itinerary:
  generation:
    mode: ${ITINERARY_GENERATION_MODE:pipeline}
    pipeline:
      parallel: ${ITINERARY_PIPELINE_PARALLEL:true}
      skeleton:
        timeout-ms: ${ITINERARY_SKELETON_TIMEOUT_MS:120000}  # 2 minutes
      population:
        timeout-ms: ${ITINERARY_POPULATION_TIMEOUT_MS:180000}  # 3 minutes
      enrichment:
        timeout-ms: ${ITINERARY_ENRICHMENT_TIMEOUT_MS:60000}  # 1 minute
      finalization:
        timeout-ms: ${ITINERARY_FINALIZATION_TIMEOUT_MS:30000}  # 30 seconds
    skeleton:
      batch-size: ${ITINERARY_SKELETON_BATCH_SIZE:1}
  max-party-size: ${MAX_PARTY_SIZE:20}
  default-language: ${DEFAULT_LANGUAGE:en}
  supported-languages: ${SUPPORTED_LANGUAGES:en,es,fr,de,it,pt,ja,ko,zh}
  rate-limit:
    requests-per-minute: ${RATE_LIMIT_RPM:100}
    burst-capacity: ${RATE_LIMIT_BURST:200}
  cache:
    ttl-minutes: ${CACHE_TTL_MINUTES:60}
  idempotency:
    ttl-hours: ${IDEMPOTENCY_TTL_HOURS:24}


