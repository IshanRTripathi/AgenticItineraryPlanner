2025-09-24 00:00:21.897 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json
2025-09-24 00:00:21.905 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json
2025-09-24 00:00:21.905 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json", parameters={}
2025-09-24 00:00:21.905 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 00:00:21.906 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4
2025-09-24 00:00:23.763 [http-nio-8080-exec-9] ERROR com.tripplanner.controller.ItinerariesController - Failed to get normalized itinerary: it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4
java.lang.RuntimeException: Failed to find itinerary
	at com.tripplanner.service.FirestoreDatabaseService.findById(FirestoreDatabaseService.java:47)
	at com.tripplanner.service.ItineraryJsonService.getItinerary(ItineraryJsonService.java:65)
	at com.tripplanner.controller.ItinerariesController.getItineraryJson(ItinerariesController.java:138)
	at jdk.internal.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.common.util.concurrent.FluentFuture$TrustedFuture.get(FluentFuture.java:91)
	at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:67)
	at com.tripplanner.service.FirestoreDatabaseService.findById(FirestoreDatabaseService.java:42)
	... 107 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:00:23.764 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:00:23.764 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:00:23.764 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:00:23.764 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:17:45.300 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json
2025-09-24 00:17:45.300 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json
2025-09-24 00:17:45.301 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json", parameters={}
2025-09-24 00:17:45.301 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 00:17:45.301 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4
2025-09-24 00:17:47.088 [http-nio-8080-exec-10] ERROR com.tripplanner.controller.ItinerariesController - Failed to get normalized itinerary: it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4
java.lang.RuntimeException: Failed to find itinerary
	at com.tripplanner.service.FirestoreDatabaseService.findById(FirestoreDatabaseService.java:47)
	at com.tripplanner.service.ItineraryJsonService.getItinerary(ItineraryJsonService.java:65)
	at com.tripplanner.controller.ItinerariesController.getItineraryJson(ItinerariesController.java:138)
	at jdk.internal.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.common.util.concurrent.FluentFuture$TrustedFuture.get(FluentFuture.java:91)
	at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:67)
	at com.tripplanner.service.FirestoreDatabaseService.findById(FirestoreDatabaseService.java:42)
	... 107 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:17:47.090 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:17:47.090 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:17:47.090 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:17:47.090 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:21:58.977 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json
2025-09-24 00:21:58.978 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json
2025-09-24 00:21:58.978 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json", parameters={}
2025-09-24 00:21:58.978 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 00:21:58.978 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4
2025-09-24 00:22:00.573 [http-nio-8080-exec-4] ERROR com.tripplanner.controller.ItinerariesController - Failed to get normalized itinerary: it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4
java.lang.RuntimeException: Failed to find itinerary
	at com.tripplanner.service.FirestoreDatabaseService.findById(FirestoreDatabaseService.java:47)
	at com.tripplanner.service.ItineraryJsonService.getItinerary(ItineraryJsonService.java:65)
	at com.tripplanner.controller.ItinerariesController.getItineraryJson(ItinerariesController.java:138)
	at jdk.internal.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.common.util.concurrent.FluentFuture$TrustedFuture.get(FluentFuture.java:91)
	at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:67)
	at com.tripplanner.service.FirestoreDatabaseService.findById(FirestoreDatabaseService.java:42)
	... 107 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:22:00.575 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:22:00.575 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:22:00.575 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:22:00.575 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:22:01.593 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json
2025-09-24 00:22:01.593 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json
2025-09-24 00:22:01.593 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4/json", parameters={}
2025-09-24 00:22:01.593 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 00:22:01.593 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4
2025-09-24 00:22:01.905 [http-nio-8080-exec-2] ERROR com.tripplanner.controller.ItinerariesController - Failed to get normalized itinerary: it_0924b274-ec72-4985-9a8e-cbebfdd1f8a4
java.lang.RuntimeException: Failed to find itinerary
	at com.tripplanner.service.FirestoreDatabaseService.findById(FirestoreDatabaseService.java:47)
	at com.tripplanner.service.ItineraryJsonService.getItinerary(ItineraryJsonService.java:65)
	at com.tripplanner.controller.ItinerariesController.getItineraryJson(ItinerariesController.java:138)
	at jdk.internal.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.common.util.concurrent.FluentFuture$TrustedFuture.get(FluentFuture.java:91)
	at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:67)
	at com.tripplanner.service.FirestoreDatabaseService.findById(FirestoreDatabaseService.java:42)
	... 107 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:22:01.906 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:22:01.906 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:22:01.906 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:22:01.906 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:22:18.104 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries
2025-09-24 00:22:18.106 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:22:18.107 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:22:18.107 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:22:18.107 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:22:18.107 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:22:18.420 [http-nio-8080-exec-5] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:22:18.421 [http-nio-8080-exec-5] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:22:18.423 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:22:18.423 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:22:18.423 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:22:18.423 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:22:18.424 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:22:18.424 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:22:18.424 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:22:18.424 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:22:18.424 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:22:19.565 [http-nio-8080-exec-7] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:22:19.566 [http-nio-8080-exec-7] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:22:19.567 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:22:19.567 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:22:19.567 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:22:19.567 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:22:20.584 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:22:20.584 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:22:20.584 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:22:20.584 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:22:20.584 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:22:20.879 [http-nio-8080-exec-6] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:22:20.881 [http-nio-8080-exec-6] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:22:20.882 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:22:20.882 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:22:20.882 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:22:20.882 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:23:32.710 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:23:32.710 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:23:32.710 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:23:32.710 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:23:32.710 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:23:33.021 [http-nio-8080-exec-8] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:23:33.022 [http-nio-8080-exec-8] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:23:33.023 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:23:33.023 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:23:33.023 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:23:33.023 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:23:34.027 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:23:34.027 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:23:34.027 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:23:34.027 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:23:34.027 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:23:34.446 [http-nio-8080-exec-1] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:23:34.447 [http-nio-8080-exec-1] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:23:34.448 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:23:34.448 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:23:34.448 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:23:34.448 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:23:47.903 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:23:47.903 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:23:47.903 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:23:47.903 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:23:47.903 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:23:48.204 [http-nio-8080-exec-9] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:23:48.205 [http-nio-8080-exec-9] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:23:48.206 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:23:48.206 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:23:48.206 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:23:48.206 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:23:49.223 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:23:49.223 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:23:49.223 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:23:49.223 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:23:49.223 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:23:49.519 [http-nio-8080-exec-10] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:23:49.520 [http-nio-8080-exec-10] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:23:49.521 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:23:49.521 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:23:49.521 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:23:49.521 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:24:47.742 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:24:47.742 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:24:47.742 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:24:47.743 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:24:47.743 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:24:48.056 [http-nio-8080-exec-4] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:24:48.057 [http-nio-8080-exec-4] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:24:48.058 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:24:48.058 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:24:48.058 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:24:48.058 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:24:49.077 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:24:49.077 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:24:49.077 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:24:49.077 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:24:49.078 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:24:49.397 [http-nio-8080-exec-2] ERROR com.tripplanner.service.ItineraryService - Failed to get user itineraries
java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:24:49.397 [http-nio-8080-exec-2] ERROR com.tripplanner.controller.ItinerariesController - Failed to get itineraries
java.lang.RuntimeException: Failed to get user itineraries
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:174)
	at com.tripplanner.controller.ItinerariesController.getAll(ItinerariesController.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.tripplanner.config.Utf8EncodingFilter.doFilter(Utf8EncodingFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to list itineraries
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:76)
	at com.tripplanner.service.ItineraryJsonService.getAllItineraries(ItineraryJsonService.java:73)
	at com.tripplanner.service.ItineraryService.getUserItineraries(ItineraryService.java:165)
	... 107 common frames omitted
Caused by: java.util.concurrent.ExecutionException: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
	at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)
	at com.google.api.core.AbstractApiFuture.get(AbstractApiFuture.java:53)
	at com.tripplanner.service.FirestoreDatabaseService.findAllOrderByUpdatedAtDesc(FirestoreDatabaseService.java:68)
	... 109 common frames omitted
Caused by: com.google.api.gax.rpc.PermissionDeniedException: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:98)
	at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)
	at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)
	at com.google.api.gax.grpc.ExceptionResponseObserver.onErrorImpl(ExceptionResponseObserver.java:82)
	at com.google.api.gax.rpc.StateCheckingResponseObserver.onError(StateCheckingResponseObserver.java:84)
	at com.google.api.gax.grpc.GrpcDirectStreamController$ResponseObserverAdapter.onClose(GrpcDirectStreamController.java:148)
	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)
	at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted
Caused by: io.grpc.StatusRuntimeException: PERMISSION_DENIED: Missing or insufficient permissions.
	at io.grpc.Status.asRuntimeException(Status.java:539)
	... 14 common frames omitted
2025-09-24 00:24:49.398 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:24:49.398 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 00:24:49.398 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-24 00:24:49.398 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:30:36.671 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 00:31:06.739 [SpringApplicationShutdownHook] INFO  o.s.context.support.DefaultLifecycleProcessor - Shutdown phase 2147482623 ends with 1 bean still running after timeout of 30000ms: [webServerGracefulShutdown]
2025-09-24 00:31:06.740 [http-nio-8080-exec-3] DEBUG o.s.web.context.request.async.WebAsyncManager - Servlet container timeout notification for "/api/v1/agents/stream"
2025-09-24 00:31:06.740 [http-nio-8080-exec-5] DEBUG o.s.web.context.request.async.WebAsyncManager - Servlet container timeout notification for "/api/v1/agents/stream"
2025-09-24 00:31:06.742 [http-nio-8080-exec-3] DEBUG o.s.web.context.request.async.WebAsyncManager - Async result set for "/api/v1/agents/stream"
2025-09-24 00:31:06.742 [http-nio-8080-exec-5] DEBUG o.s.web.context.request.async.WebAsyncManager - Async result set for "/api/v1/agents/stream"
2025-09-24 00:31:06.742 [http-nio-8080-exec-3] DEBUG o.s.web.context.request.async.WebAsyncManager - Performing async dispatch for "/api/v1/agents/stream"
2025-09-24 00:31:06.742 [http-nio-8080-exec-5] DEBUG o.s.web.context.request.async.WebAsyncManager - Performing async dispatch for "/api/v1/agents/stream"
2025-09-24 00:31:06.748 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_f21539ad-3122-421f-8453-df92dcdd4d46
2025-09-24 00:31:06.748 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_f21539ad-3122-421f-8453-df92dcdd4d46
2025-09-24 00:31:06.748 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_f21539ad-3122-421f-8453-df92dcdd4d46
2025-09-24 00:31:06.748 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_f21539ad-3122-421f-8453-df92dcdd4d46
2025-09-24 00:31:06.748 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - "ASYNC" dispatch for GET "/api/v1/agents/stream?itineraryId=it_f21539ad-3122-421f-8453-df92dcdd4d46", parameters={masked}
2025-09-24 00:31:06.748 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - "ASYNC" dispatch for GET "/api/v1/agents/stream?itineraryId=it_f21539ad-3122-421f-8453-df92dcdd4d46", parameters={masked}
2025-09-24 00:31:06.749 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Resume with async result [org.springframework.web.context.request.async.AsyncRequestTimeoutException]
2025-09-24 00:31:06.749 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Resume with async result [org.springframework.web.context.request.async.AsyncRequestTimeoutException]
2025-09-24 00:31:06.754 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.tripplanner.controller.GlobalExceptionHandler#handleRuntimeException(RuntimeException, WebRequest)
2025-09-24 00:31:06.754 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.tripplanner.controller.GlobalExceptionHandler#handleRuntimeException(RuntimeException, WebRequest)
2025-09-24 00:31:06.755 [http-nio-8080-exec-5] ERROR com.tripplanner.controller.GlobalExceptionHandler - Runtime error: null
org.springframework.web.context.request.async.AsyncRequestTimeoutException: null
	at org.springframework.web.context.request.async.TimeoutDeferredResultProcessingInterceptor.handleTimeout(TimeoutDeferredResultProcessingInterceptor.java:42)
	at org.springframework.web.context.request.async.DeferredResultInterceptorChain.triggerAfterTimeout(DeferredResultInterceptorChain.java:81)
	at org.springframework.web.context.request.async.WebAsyncManager.lambda$startDeferredResultProcessing$5(WebAsyncManager.java:434)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest.onTimeout(StandardServletAsyncWebRequest.java:186)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:44)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:136)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:135)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-24 00:31:06.755 [http-nio-8080-exec-3] ERROR com.tripplanner.controller.GlobalExceptionHandler - Runtime error: null
org.springframework.web.context.request.async.AsyncRequestTimeoutException: null
	at org.springframework.web.context.request.async.TimeoutDeferredResultProcessingInterceptor.handleTimeout(TimeoutDeferredResultProcessingInterceptor.java:42)
	at org.springframework.web.context.request.async.DeferredResultInterceptorChain.triggerAfterTimeout(DeferredResultInterceptorChain.java:81)
	at org.springframework.web.context.request.async.WebAsyncManager.lambda$startDeferredResultProcessing$5(WebAsyncManager.java:434)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest.onTimeout(StandardServletAsyncWebRequest.java:186)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:44)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:136)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:135)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-24 00:31:06.756 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Found 'Content-Type:text/event-stream' in response
2025-09-24 00:31:06.756 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Found 'Content-Type:text/event-stream' in response
2025-09-24 00:31:06.756 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Failure in @ExceptionHandler com.tripplanner.controller.GlobalExceptionHandler#handleRuntimeException(RuntimeException, WebRequest)
org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class com.tripplanner.controller.GlobalExceptionHandler$ErrorResponse] with preset Content-Type 'text/event-stream'
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:365)
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:263)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:471)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:73)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:182)
	at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1360)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1161)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-24 00:31:06.756 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Failure in @ExceptionHandler com.tripplanner.controller.GlobalExceptionHandler#handleRuntimeException(RuntimeException, WebRequest)
org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class com.tripplanner.controller.GlobalExceptionHandler$ErrorResponse] with preset Content-Type 'text/event-stream'
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:365)
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:263)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:471)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:73)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:182)
	at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1360)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1161)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-24 00:31:06.757 [http-nio-8080-exec-3] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Ignoring exception, response committed already: org.springframework.web.context.request.async.AsyncRequestTimeoutException
2025-09-24 00:31:06.757 [http-nio-8080-exec-5] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Ignoring exception, response committed already: org.springframework.web.context.request.async.AsyncRequestTimeoutException
2025-09-24 00:31:06.757 [http-nio-8080-exec-3] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.context.request.async.AsyncRequestTimeoutException]
2025-09-24 00:31:06.757 [http-nio-8080-exec-5] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.context.request.async.AsyncRequestTimeoutException]
2025-09-24 00:31:06.758 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ASYNC" dispatch, status 200
2025-09-24 00:31:06.758 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ASYNC" dispatch, status 200
2025-09-24 00:31:06.758 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:31:06.758 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:31:06.764 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 00:31:06.784 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown aborted with one or more requests still active
2025-09-24 00:31:53.904 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 9728 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 00:31:53.905 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 00:31:54.548 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 00:31:54.555 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 00:31:54.555 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 00:31:54.594 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 00:31:54.595 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 666 ms
2025-09-24 00:31:54.623 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 00:31:54.642 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 00:31:54.709 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 00:31:54.828 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 00:31:55.091 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 00:31:55.204 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 28 mappings in 'requestMappingHandlerMapping'
2025-09-24 00:31:55.223 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 00:31:55.237 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 00:31:55.279 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 00:31:55.324 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 00:31:55.352 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 00:31:55.431 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 00:31:55.436 [main] INFO  com.tripplanner.App - Started App in 1.818 seconds (process running for 2.145)
2025-09-24 00:32:00.265 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 00:32:00.265 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 00:32:00.265 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-24 00:32:00.265 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-24 00:32:00.265 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-24 00:32:00.266 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@614cd187
2025-09-24 00:32:00.266 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@58583a2d
2025-09-24 00:32:00.266 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-24 00:32:00.266 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-24 00:32:00.277 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:32:00.289 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:32:00.291 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:32:00.292 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:32:00.297 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:32:02.498 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 00:32:02.505 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:32:02.509 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 00:32:02.522 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:32:02.522 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:32:05.174 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 00:32:05.178 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 00:32:05.179 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 00:32:05.179 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 00:32:05.179 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 00:32:05.189 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 00:32:05.571 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 00:32:05.572 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:32:05.578 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 00:32:05.583 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:32:05.584 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:34:16.140 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/chat/route
2025-09-24 00:34:16.142 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/chat/route
2025-09-24 00:34:16.142 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/chat/route
2025-09-24 00:34:16.142 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/route", parameters={}
2025-09-24 00:34:16.142 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ChatController#route(ChatRequest)
2025-09-24 00:34:16.149 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [ChatRequest{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', scope='trip', day=null, selectedN (truncated)...]
2025-09-24 00:34:16.189 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - === CHAT CONTROLLER: ROUTING MESSAGE ===
2025-09-24 00:34:16.189 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Itinerary ID: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 00:34:16.189 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Scope: trip
2025-09-24 00:34:16.189 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Day: null
2025-09-24 00:34:16.189 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Selected Node ID: null
2025-09-24 00:34:16.189 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Text: hi
2025-09-24 00:34:16.189 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Auto Apply: false
2025-09-24 00:34:16.189 [http-nio-8080-exec-6] INFO  com.tripplanner.service.OrchestratorService - Routing chat request: ChatRequest{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', scope='trip', day=null, selectedNodeId='null', text='hi', autoApply=false}
2025-09-24 00:34:16.575 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - === CHAT ROUTING COMPLETE ===
2025-09-24 00:34:16.575 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Intent: EXPLAIN
2025-09-24 00:34:16.575 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Message: Your 7-day itinerary for A 7-day budget-friendly trip to Tokyo focusing on relaxation, nature, and cuisine. includes:

Day 1 (Tokyo):
• Arrival at Narita (NRT) and transfer to hotel (transport)
• Check in to UNPLAN Shinjuku (accommodation)
• Ramen Dinner at Ichiran Shibuya (meal)

Day 2 (Tokyo):
• Senso-ji Temple (attraction)
• Street food in Asakusa (meal)
• Ueno Park (attraction)
• Dinner at Han no Daidokoro Bettei (meal)

Day 3 (Hakone):

Day 4 (Tokyo):

Day 5 (Tokyo):

Day 6 (Tokyo):

Day 7 (Tokyo):


2025-09-24 00:34:16.575 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Applied: false
2025-09-24 00:34:16.575 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ChatController - Needs Disambiguation: false
2025-09-24 00:34:16.576 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:34:16.578 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ChatResponse{intent='EXPLAIN', message='Your 7-day itinerary for A 7-day budget-friendly trip to Tok (truncated)...]
2025-09-24 00:34:16.579 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:34:16.579 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:35:29.036 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/chat/route
2025-09-24 00:35:29.037 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/chat/route
2025-09-24 00:35:29.037 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/route", parameters={}
2025-09-24 00:35:29.037 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ChatController#route(ChatRequest)
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [ChatRequest{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', scope='trip', day=null, selectedN (truncated)...]
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - === CHAT CONTROLLER: ROUTING MESSAGE ===
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Itinerary ID: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Scope: trip
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Day: null
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Selected Node ID: null
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Text: add more places on day 2 morning
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Auto Apply: false
2025-09-24 00:35:29.038 [http-nio-8080-exec-8] INFO  com.tripplanner.service.OrchestratorService - Routing chat request: ChatRequest{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', scope='trip', day=null, selectedNodeId='null', text='add more places on day 2 morning', autoApply=false}
2025-09-24 00:35:29.406 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - === CHAT ROUTING COMPLETE ===
2025-09-24 00:35:29.406 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Intent: ERROR
2025-09-24 00:35:29.406 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Message: No matching places found. Please be more specific or check the spelling.
2025-09-24 00:35:29.406 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Applied: false
2025-09-24 00:35:29.406 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ChatController - Needs Disambiguation: false
2025-09-24 00:35:29.407 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:35:29.407 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ChatResponse{intent='ERROR', message='No matching places found. Please be more specific or check the (truncated)...]
2025-09-24 00:35:29.408 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:35:29.408 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:51:15.550 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:51:15.551 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:51:15.551 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:51:15.551 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:51:15.552 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:51:17.145 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 00:51:17.146 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:51:17.146 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 00:51:17.146 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:51:17.147 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:51:23.765 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:51:23.765 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:51:23.765 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 00:51:23.766 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:51:23.766 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:51:23.766 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:51:23.766 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 00:51:23.766 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 00:51:23.767 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 00:51:23.767 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 00:51:24.135 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 00:51:24.135 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:51:24.135 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 00:51:24.135 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:51:24.136 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:51:25.271 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 00:51:25.271 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:51:25.271 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 00:51:25.272 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:51:25.272 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:51:31.510 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:51:31.511 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:51:31.511 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:51:31.512 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:51:31.512 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:51:31.929 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 00:51:31.929 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:51:31.929 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 00:51:31.930 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:51:31.930 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:55:18.916 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:55:18.917 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:55:18.917 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:55:18.917 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:55:18.917 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:55:19.276 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 00:55:19.277 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:55:19.277 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 00:55:19.277 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:55:19.277 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:55:41.898 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 00:55:41.899 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 00:55:41.899 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 00:55:41.899 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 00:55:41.899 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 00:55:42.228 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 00:55:42.228 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 00:55:42.228 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 00:55:42.229 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 00:55:42.229 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:01:51.468 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:01:51.469 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:01:51.469 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:01:51.469 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:01:51.469 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:01:53.328 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:01:53.328 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:01:53.328 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 01:01:53.329 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:01:53.329 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:04:13.922 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:04:13.922 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:04:13.923 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:04:13.923 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:04:13.923 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:04:14.338 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:04:14.339 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:04:14.339 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 01:04:14.339 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:04:14.339 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:04:32.107 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 01:04:32.148 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-24 01:04:32.156 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 01:04:35.135 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 25320 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 01:04:35.137 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 01:04:35.857 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 01:04:35.864 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 01:04:35.864 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 01:04:35.898 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 01:04:35.899 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 713 ms
2025-09-24 01:04:35.929 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 01:04:35.949 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 01:04:36.019 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 01:04:36.135 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 01:04:36.409 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 01:04:36.525 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 28 mappings in 'requestMappingHandlerMapping'
2025-09-24 01:04:36.544 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 01:04:36.557 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 01:04:36.598 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 01:04:36.640 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 01:04:36.666 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 01:04:36.739 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 01:04:36.743 [main] INFO  com.tripplanner.App - Started App in 1.923 seconds (process running for 2.264)
2025-09-24 01:04:43.521 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 01:04:43.521 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 01:04:43.521 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-24 01:04:43.522 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-24 01:04:43.522 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-24 01:04:43.522 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4a41caed
2025-09-24 01:04:43.522 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6802d023
2025-09-24 01:04:43.522 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-24 01:04:43.522 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-24 01:04:43.533 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:04:43.546 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:04:43.548 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:04:43.549 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:04:43.554 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:04:45.623 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:04:45.630 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:04:45.634 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo focusing on relaxation,  (truncated)...]
2025-09-24 01:04:45.647 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:04:45.648 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:08:04.449 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:08:04.450 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:08:04.451 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:08:04.451 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:08:04.451 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:08:04.835 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:08:04.835 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:08:04.835 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo focusing on relaxation,  (truncated)...]
2025-09-24 01:08:04.836 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:08:04.836 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:08:12.025 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:08:12.026 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:08:12.026 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:08:12.026 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:08:12.026 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:08:12.394 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:08:12.394 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:08:12.394 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo focusing on relaxation,  (truncated)...]
2025-09-24 01:08:12.395 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:08:12.395 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:08:24.106 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 01:08:24.148 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-24 01:08:24.157 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 01:08:26.221 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 4060 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 01:08:26.223 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 01:08:26.887 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 01:08:26.895 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 01:08:26.895 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 01:08:26.930 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 01:08:26.930 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 678 ms
2025-09-24 01:08:26.956 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 01:08:26.976 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 01:08:27.044 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 01:08:27.151 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 01:08:27.417 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 01:08:27.521 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 28 mappings in 'requestMappingHandlerMapping'
2025-09-24 01:08:27.539 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 01:08:27.552 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 01:08:27.591 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 01:08:27.631 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 01:08:27.657 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 01:08:27.741 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 01:08:27.746 [main] INFO  com.tripplanner.App - Started App in 1.803 seconds (process running for 2.111)
2025-09-24 01:08:33.609 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 01:08:33.609 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 01:08:33.609 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-24 01:08:33.609 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-24 01:08:33.609 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-24 01:08:33.609 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6b4fd7d
2025-09-24 01:08:33.609 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@e895e3e
2025-09-24 01:08:33.610 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-24 01:08:33.610 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-24 01:08:33.620 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:08:33.634 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:08:33.635 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:08:33.636 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:08:33.641 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:08:35.860 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:08:35.867 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:08:35.871 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo focusing on relaxation,  (truncated)...]
2025-09-24 01:08:35.884 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:08:35.884 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:12:20.099 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 01:12:20.139 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-24 01:12:20.149 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 01:12:23.591 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 4584 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 01:12:23.592 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 01:12:24.366 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 01:12:24.372 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 01:12:24.373 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 01:12:24.410 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 01:12:24.410 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 795 ms
2025-09-24 01:12:24.439 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 01:12:24.466 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 01:12:24.539 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 01:12:24.675 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 01:12:24.946 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 01:12:25.052 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 28 mappings in 'requestMappingHandlerMapping'
2025-09-24 01:12:25.071 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 01:12:25.085 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 01:12:25.126 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 01:12:25.166 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 01:12:25.192 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 01:12:25.274 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 01:12:25.278 [main] INFO  com.tripplanner.App - Started App in 1.964 seconds (process running for 2.288)
2025-09-24 01:12:29.938 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 01:12:29.939 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 01:12:29.939 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-24 01:12:29.939 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-24 01:12:29.939 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-24 01:12:29.939 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@58583a2d
2025-09-24 01:12:29.939 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@74619273
2025-09-24 01:12:29.939 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-24 01:12:29.940 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-09-24 01:12:29.950 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:12:29.964 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:12:29.965 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:12:29.966 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:12:29.972 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:12:31.941 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:12:31.948 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:12:31.951 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:12:31.965 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:12:31.966 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:13:41.677 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:13:41.678 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:13:41.678 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:13:41.678 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:13:41.679 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:13:42.040 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:13:42.040 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:13:42.041 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:13:42.041 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:13:42.041 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:13:55.669 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:13:55.670 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:13:55.671 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:13:55.671 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:13:55.671 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:13:56.025 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:13:56.025 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:13:56.025 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:13:56.026 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:13:56.026 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:14:15.978 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:14:15.979 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:14:15.979 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:14:15.979 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:14:15.979 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:14:16.553 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:14:16.554 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:14:16.554 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:14:16.554 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:14:16.554 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:15:03.541 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:15:03.542 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:15:03.542 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:15:03.543 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:15:03.543 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:15:03.893 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:15:03.893 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:15:03.893 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:15:03.894 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:15:03.894 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:15:30.735 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:15:30.735 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:15:30.736 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:15:30.736 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:15:30.737 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:15:31.188 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:15:31.188 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:15:31.188 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:15:31.189 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:15:31.189 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:15:39.147 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:15:39.147 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:15:39.148 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:15:39.148 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:15:39.148 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:15:39.479 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:15:39.479 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:15:39.479 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:15:39.480 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:15:39.480 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:19:36.251 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:19:36.251 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:19:36.251 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:19:36.251 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:19:36.252 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:19:36.583 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:19:36.583 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:19:36.583 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:19:36.584 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:19:36.584 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:21:28.964 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:21:28.964 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:21:28.964 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:21:28.964 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:21:28.965 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:21:29.315 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:21:29.315 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:21:29.315 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:21:29.316 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:21:29.316 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:21:33.268 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:21:33.269 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:21:33.269 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:21:33.269 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:21:33.269 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:21:33.782 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:21:33.783 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:21:33.783 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:21:33.783 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:21:33.783 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:21:40.884 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:21:40.885 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:21:40.885 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:21:40.885 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:21:40.885 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:21:41.243 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:21:41.244 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:21:41.244 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:21:41.244 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:21:41.244 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:21:54.335 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries
2025-09-24 01:21:54.338 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:21:54.338 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:21:54.338 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:21:54.338 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:21:54.339 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:21:54.677 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:21:54.677 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:21:54.677 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:21:54.677 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:21:54.677 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:22:00.184 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:22:00.185 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:22:00.185 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:22:00.185 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:22:00.185 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:22:00.519 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:22:00.519 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:22:00.519 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:22:00.520 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:22:00.520 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:23:28.088 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:23:28.089 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:23:28.089 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:23:28.089 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:23:28.089 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:23:28.431 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:23:28.431 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:23:28.432 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:23:28.432 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:23:28.432 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:23:42.450 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 01:23:42.451 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 01:23:42.451 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 01:23:42.451 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 01:23:42.451 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 01:23:42.779 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 01:23:42.779 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:23:42.780 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b, destination=Tokyo, startDate=2025-10-04, e (truncated)...]
2025-09-24 01:23:42.780 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:23:42.780 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:24:57.786 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:24:57.786 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:24:57.786 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:24:57.787 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:24:58.290 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:24:58.639 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:24:58.641 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:24:58.647 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:24:58.653 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:24:58.654 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:28:47.512 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:28:47.512 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:28:47.513 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:28:47.513 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:28:47.513 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:28:47.882 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:28:47.882 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:28:47.883 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:28:47.884 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:28:47.884 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:28:47.887 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:28:47.887 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:28:47.887 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:28:47.888 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:28:47.888 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:28:49.043 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:28:49.044 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:28:49.044 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:28:49.048 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:28:49.048 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:31:37.291 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:37.292 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:37.292 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:31:37.292 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:31:37.293 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:37.622 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:37.623 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:31:37.623 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:31:37.624 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:31:37.624 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:31:37.627 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:37.627 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:37.627 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:31:37.627 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:31:37.628 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:38.753 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:38.753 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:31:38.754 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:31:38.755 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:31:38.755 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:31:45.319 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:45.320 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:45.320 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:31:45.320 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:31:45.320 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:45.666 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:45.666 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:31:45.666 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:31:45.667 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:31:45.667 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:31:45.668 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:45.668 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:45.668 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:31:45.668 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:31:45.669 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:46.036 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:46.036 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:31:46.036 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:31:46.037 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:31:46.037 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:31:52.999 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:52.999 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:52.999 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:31:53.000 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:31:53.000 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:53.317 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:53.317 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:31:53.318 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:31:53.319 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:31:53.319 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:31:53.320 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:53.321 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:31:53.321 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:31:53.321 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:31:53.321 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:54.497 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:31:54.498 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:31:54.498 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:31:54.499 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:31:54.499 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:32:14.216 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:32:14.218 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:32:14.219 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:32:14.220 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:32:14.220 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:32:14.220 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:32:14.220 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:32:14.565 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:32:14.566 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:32:14.566 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:32:14.567 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:32:14.567 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:32:14.567 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:32:14.567 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:32:14.567 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:32:14.569 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:32:14.569 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:32:15.697 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:32:15.697 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:32:15.697 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:32:15.698 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:32:15.698 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:33:40.912 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:33:40.913 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:33:40.913 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:33:40.913 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:33:40.913 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:33:41.233 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:33:41.234 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:33:41.234 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:33:41.235 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:33:41.235 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:33:50.257 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:33:50.257 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:33:50.258 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:33:50.258 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:33:50.258 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:33:50.616 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:33:50.616 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:33:50.617 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:33:50.617 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:33:50.617 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:34:01.682 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:34:01.682 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:34:01.682 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:34:01.682 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:34:01.683 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:34:02.028 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:34:02.028 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:34:02.028 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:34:02.029 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:34:02.029 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:57:41.138 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:57:41.138 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:57:41.138 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:57:41.138 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:57:41.139 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:57:42.972 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:57:42.972 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:57:42.972 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:57:42.973 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:57:42.973 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 01:59:02.675 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:59:02.675 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 01:59:02.675 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 01:59:02.675 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 01:59:02.676 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:59:03.092 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 01:59:03.092 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 01:59:03.092 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 01:59:03.093 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 01:59:03.094 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:00:58.887 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:00:58.887 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:00:58.887 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:00:58.888 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:00:58.888 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:00:59.284 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:00:59.284 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:00:59.284 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:00:59.285 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:00:59.285 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:02:27.261 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:02:27.261 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:02:27.261 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:02:27.262 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:02:27.262 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:02:27.647 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:02:27.648 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:02:27.648 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:02:27.649 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:02:27.649 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:02:44.091 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:02:44.091 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:02:44.091 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:02:44.091 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:02:44.092 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:02:44.490 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:02:44.491 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:02:44.491 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:02:44.491 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:02:44.491 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:02:59.402 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:02:59.404 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:02:59.405 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:02:59.405 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:02:59.405 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:02:59.405 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:02:59.802 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:02:59.802 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:02:59.802 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:02:59.803 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:02:59.803 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:03:43.871 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:03:43.873 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:03:43.874 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:03:43.874 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:03:43.874 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:03:43.874 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:03:44.275 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:03:44.275 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:03:44.275 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:03:44.276 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:03:44.276 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:05:10.464 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:05:10.466 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:05:10.466 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:05:10.466 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:05:10.466 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:05:10.467 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:05:10.864 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:05:10.864 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:05:10.864 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:05:10.865 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:05:10.865 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:06:55.539 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:06:55.541 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:06:55.542 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:06:55.542 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:06:55.542 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:06:55.542 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:06:55.939 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:06:55.940 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:06:55.940 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:06:55.940 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:06:55.940 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:07:00.721 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:07:00.723 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:07:00.724 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:07:00.724 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:07:00.724 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:07:00.724 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:07:01.109 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:07:01.110 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:07:01.110 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:07:01.110 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:07:01.110 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:07:33.501 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:07:33.504 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:07:33.504 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:07:33.504 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:07:33.505 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:07:33.505 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:07:33.887 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:07:33.887 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:07:33.887 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:07:33.887 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:07:33.888 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:08:00.110 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:08:00.112 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:08:00.113 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:08:00.113 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:08:00.113 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:08:00.113 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:08:00.597 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:08:00.597 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:08:00.598 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:08:00.598 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:08:00.598 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:09:08.808 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:09:08.811 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:09:08.811 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:09:08.811 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:09:08.811 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:09:08.812 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:09:09.196 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:09:09.196 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:09:09.196 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:09:09.197 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:09:09.197 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:09:23.173 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:09:23.175 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:09:23.175 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:09:23.175 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:09:23.176 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:09:23.176 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:09:23.557 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:09:23.558 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:09:23.558 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:09:23.558 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:09:23.558 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:10:22.544 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:10:22.544 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:10:22.544 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:10:22.545 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:10:22.545 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:10:22.935 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:10:22.935 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:10:22.935 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:10:22.936 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:10:22.936 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:10:28.823 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:10:28.823 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:10:28.823 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:10:28.823 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:10:28.823 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:10:29.225 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:10:29.225 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:10:29.225 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:10:29.226 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:10:29.226 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:12:43.771 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:12:43.774 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:12:43.774 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:12:43.774 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:12:43.774 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:12:43.774 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:12:44.147 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:12:44.147 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:12:44.147 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:12:44.147 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:12:44.148 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:14:14.975 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:14:14.978 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:14:14.978 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:14:14.978 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:14:14.979 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:14:14.979 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:14:15.370 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:14:15.370 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:14:15.370 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:14:15.371 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:14:15.371 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:14:26.792 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:14:26.793 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:14:26.794 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:14:26.794 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:14:26.794 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:14:26.794 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:14:27.188 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:14:27.188 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:14:27.190 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:14:27.190 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:14:27.190 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:15:25.091 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:15:25.094 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:15:25.095 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:15:25.095 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:15:25.095 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:15:25.095 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:15:25.484 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:15:25.484 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:15:25.484 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:15:25.484 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:15:25.484 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:17:02.181 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:17:02.183 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:17:02.184 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:17:02.184 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:17:02.184 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:17:02.184 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:17:02.649 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:17:02.649 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:17:02.649 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:17:02.649 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:17:02.650 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:17:49.675 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:17:49.678 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:17:49.678 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:17:49.678 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:17:49.678 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:17:49.679 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:17:50.070 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:17:50.070 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:17:50.070 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:17:50.070 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:17:50.070 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:19:19.698 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:19:19.700 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:19:19.700 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:19:19.700 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:19:19.700 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:19:19.701 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:19:20.098 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:19:20.099 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:19:20.099 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:19:20.099 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:19:20.099 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:23:30.499 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:30.501 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:30.501 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:30.502 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:23:30.502 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:23:30.502 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:23:32.106 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:23:32.107 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:23:32.107 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:23:32.108 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:23:32.108 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:23:38.947 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:38.949 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:38.950 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:38.950 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:23:38.950 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:23:38.951 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:23:39.324 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:23:39.324 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:23:39.325 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:23:39.325 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:23:39.325 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:23:41.283 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:41.285 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:41.286 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 02:23:41.286 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 02:23:41.286 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 02:23:41.286 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:23:41.641 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 02:23:41.641 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 02:23:41.641 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 02:23:41.642 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 02:23:41.642 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 02:24:09.917 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 02:24:09.964 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-24 02:24:09.977 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:00:59.384 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/org.json/json/20180130/26ba2ec0e791a32ea5dfbedfcebf36447ee5b12c/json-20180130.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-09-24 17:00:59.390 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Starting SimpleIntegrationTest using Java 17.0.12 with PID 32100 (started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:00:59.391 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:00:59.402 [Test worker] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5cb8580
2025-09-24 17:01:00.040 [Test worker] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:01:00.144 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:01:00.146 [Test worker] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:01:00.147 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:01:00.358 [Test worker] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:01:00.800 [Test worker] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:01:00.845 [Test worker] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: 
2025-09-24 17:01:00.918 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 28 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:01:00.957 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:01:00.986 [Test worker] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:01:01.074 [Test worker] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:01:01.182 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:01:01.190 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:01:01.285 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Started SimpleIntegrationTest in 2.13 seconds (process running for 4.288)
2025-09-24 17:01:01.302 [Test worker] INFO  o.s.b.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:01:01.303 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:01:01.303 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:01:01.307 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-09-24 17:01:01.320 [Test worker] INFO  o.s.b.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:01:01.320 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:01:01.320 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:01:01.321 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-09-24 17:01:01.322 [Test worker] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-09-24 17:01:01.323 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.tripplanner.controller.GlobalExceptionHandler#handleGenericException(Exception, WebRequest)
2025-09-24 17:01:01.323 [Test worker] ERROR com.tripplanner.controller.GlobalExceptionHandler - Unexpected error: No static resource api/v1/ping.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/ping.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at com.tripplanner.api.SimpleIntegrationTest.testApiEndpoints(SimpleIntegrationTest.java:37)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:122)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:72)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-09-24 17:01:01.334 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:01:01.336 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ErrorResponse[code=INTERNAL_ERROR, message=Internal server error, hint=An unexpected error occurred, (truncated)...]
2025-09-24 17:01:01.337 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/ping.]
2025-09-24 17:01:01.391 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5cb8580, started on Wed Sep 24 17:00:59 IST 2025
2025-09-24 17:01:01.393 [SpringApplicationShutdownHook] INFO  c.tripplanner.service.openrouter.OpenRouterClient - OpenRouter client cleanup completed
2025-09-24 17:01:01.398 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:01:01.398 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:01:50.113 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/org.json/json/20180130/26ba2ec0e791a32ea5dfbedfcebf36447ee5b12c/json-20180130.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-09-24 17:01:50.120 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Starting SimpleIntegrationTest using Java 17.0.12 with PID 17220 (started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:01:50.120 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:01:50.130 [Test worker] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5cb8580
2025-09-24 17:01:50.751 [Test worker] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:01:50.824 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:01:50.825 [Test worker] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:01:50.826 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:01:51.014 [Test worker] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:01:51.314 [Test worker] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:01:51.354 [Test worker] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: 
2025-09-24 17:01:51.433 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 29 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:01:51.465 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:01:51.490 [Test worker] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:01:51.563 [Test worker] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:01:51.664 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:01:51.674 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:01:51.764 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Started SimpleIntegrationTest in 1.877 seconds (process running for 3.921)
2025-09-24 17:01:51.779 [Test worker] INFO  o.s.b.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:01:51.779 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:01:51.779 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:01:51.782 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-09-24 17:01:51.797 [Test worker] INFO  o.s.b.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:01:51.797 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:01:51.797 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:01:51.797 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.PingController#ping()
2025-09-24 17:01:51.799 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-09-24 17:01:51.799 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing ["pong"]
2025-09-24 17:01:51.848 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5cb8580, started on Wed Sep 24 17:01:50 IST 2025
2025-09-24 17:01:51.850 [SpringApplicationShutdownHook] INFO  c.tripplanner.service.openrouter.OpenRouterClient - OpenRouter client cleanup completed
2025-09-24 17:01:51.853 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:01:51.853 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:13:03.774 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/org.json/json/20180130/26ba2ec0e791a32ea5dfbedfcebf36447ee5b12c/json-20180130.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-09-24 17:13:03.781 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Starting SimpleIntegrationTest using Java 17.0.12 with PID 30488 (started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:13:03.782 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:13:03.793 [Test worker] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5c740c5a
2025-09-24 17:13:04.427 [Test worker] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:13:04.501 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:13:04.503 [Test worker] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:13:04.504 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:13:04.688 [Test worker] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:13:04.993 [Test worker] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:13:05.032 [Test worker] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: 
2025-09-24 17:13:05.102 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 29 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:13:05.136 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:13:05.158 [Test worker] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:13:05.217 [Test worker] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:13:05.326 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:13:05.335 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:13:05.454 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Started SimpleIntegrationTest in 1.909 seconds (process running for 3.878)
2025-09-24 17:13:05.468 [Test worker] INFO  o.s.b.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:13:05.468 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:13:05.469 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-24 17:13:05.473 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-09-24 17:13:05.490 [Test worker] INFO  o.s.b.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:13:05.490 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:13:05.491 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-24 17:13:05.491 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.PingController#ping()
2025-09-24 17:13:05.493 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-09-24 17:13:05.494 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing ["pong"]
2025-09-24 17:13:05.534 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5c740c5a, started on Wed Sep 24 17:13:03 IST 2025
2025-09-24 17:13:05.535 [SpringApplicationShutdownHook] INFO  c.tripplanner.service.openrouter.OpenRouterClient - OpenRouter client cleanup completed
2025-09-24 17:13:05.542 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:13:05.542 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:22:17.131 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 24440 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:22:17.133 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:22:17.873 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 17:22:17.883 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 17:22:17.883 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 17:22:17.925 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 17:22:17.926 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 759 ms
2025-09-24 17:22:17.961 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 17:22:17.985 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:22:18.059 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:22:18.060 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:22:18.061 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:22:18.244 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:22:18.526 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:22:18.563 [main] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: 
2025-09-24 17:22:18.648 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 29 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:22:18.671 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:22:18.684 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:22:18.726 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:22:18.766 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:22:18.791 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:22:18.867 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 17:22:18.871 [main] INFO  com.tripplanner.App - Started App in 2.133 seconds (process running for 2.509)
2025-09-24 17:22:28.388 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 17:22:28.436 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-24 17:22:28.439 [SpringApplicationShutdownHook] INFO  c.tripplanner.service.openrouter.OpenRouterClient - OpenRouter client cleanup completed
2025-09-24 17:22:28.442 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:22:28.442 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:22:30.270 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 25080 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:22:30.271 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:22:30.920 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 17:22:30.927 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 17:22:30.927 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 17:22:30.963 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 17:22:30.963 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 666 ms
2025-09-24 17:22:30.993 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 17:22:31.014 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:22:31.085 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:22:31.085 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:22:31.086 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:22:31.235 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:22:31.498 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:22:31.531 [main] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: 
2025-09-24 17:22:31.603 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 29 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:22:31.623 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:22:31.635 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:22:31.673 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:22:31.708 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:22:31.733 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:22:31.805 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 17:22:31.810 [main] INFO  com.tripplanner.App - Started App in 1.83 seconds (process running for 2.156)
2025-09-24 17:22:39.203 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 17:22:39.204 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 17:22:39.204 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-24 17:22:39.204 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-24 17:22:39.204 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-24 17:22:39.204 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@16ef1160
2025-09-24 17:22:39.204 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3dea1ecc
2025-09-24 17:22:39.204 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-24 17:22:39.204 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:22:39.217 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 17:22:39.232 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 17:22:39.235 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json
2025-09-24 17:22:39.236 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b/json", parameters={}
2025-09-24 17:22:39.237 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:22:39.252 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:22:41.368 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:22:41.377 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:22:41.384 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b', version=1, summary='A 7-d (truncated)...]
2025-09-24 17:22:41.393 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:22:41.394 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:22:50.804 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries
2025-09-24 17:22:50.806 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/itineraries
2025-09-24 17:22:50.807 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/itineraries
2025-09-24 17:22:50.807 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/itineraries", parameters={}
2025-09-24 17:22:50.807 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#create(CreateItineraryReq)
2025-09-24 17:22:50.820 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateItineraryReq(destination=Paris, France, startDate=2025-10-04, endDate=2025-10-07, party=PartyD (truncated)...]
2025-09-24 17:22:50.844 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Creating itinerary
2025-09-24 17:22:50.844 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Request: CreateItineraryReq(destination=Paris, France, startDate=2025-10-04, endDate=2025-10-07, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:22:50.844 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY REQUEST ===
2025-09-24 17:22:50.844 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService - Request Details:
2025-09-24 17:22:50.844 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   Destination: Paris, France
2025-09-24 17:22:50.844 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   Start Date: 2025-10-04
2025-09-24 17:22:50.844 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   End Date: 2025-10-07
2025-09-24 17:22:50.845 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   Duration: 3 days
2025-09-24 17:22:50.845 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   Budget Tier: mid-range
2025-09-24 17:22:50.845 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   Language: en
2025-09-24 17:22:50.845 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   Party: 1 adults, 0 children, 0 infants, 1 rooms
2025-09-24 17:22:50.845 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   Interests: relaxation, nature, cuisine
2025-09-24 17:22:50.845 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService -   Constraints: budgetFriendly
2025-09-24 17:22:50.847 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - === AGENT ORCHESTRATOR: NORMALIZED ITINERARY GENERATION ===
2025-09-24 17:22:50.847 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.847 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Destination: Paris, France
2025-09-24 17:22:50.847 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 1: Creating initial itinerary structure
2025-09-24 17:22:50.847 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY RESPONSE ===
2025-09-24 17:22:50.847 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.847 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService - Status: generating
2025-09-24 17:22:50.847 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService - Orchestration started: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.847 [http-nio-8080-exec-4] INFO  com.tripplanner.service.ItineraryService - =====================================
2025-09-24 17:22:50.847 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Itinerary created successfully: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.851 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:22:50.854 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ItineraryDto(id=it_718baa50-1345-481b-8eab-ccba3245592e, destination=Paris, France, startDate=2025-1 (truncated)...]
2025-09-24 17:22:50.855 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:22:50.855 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:22:50.862 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:50.864 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:50.864 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:50.864 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:22:50.864 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:22:50.865 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.869 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.870 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.871 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_718baa50-1345-481b-8eab-ccba3245592e", parameters={masked}
2025-09-24 17:22:50.871 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:22:50.871 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:22:50.871 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.872 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Request Time: 17:22:50.871761300
2025-09-24 17:22:50.872 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:22:50.872 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@1c350408
2025-09-24 17:22:50.872 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:22:50.872 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.872 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@1c350408
2025-09-24 17:22:50.873 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_718baa50-1345-481b-8eab-ccba3245592e: 1
2025-09-24 17:22:50.873 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 1
2025-09-24 17:22:50.873 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:22:50.873 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:22:50.873 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:22:50.873 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:50.873 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:22:50.873 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:22:50.877 [http-nio-8080-exec-7] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:22:50.881 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:22:50.882 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:22:51.204 [http-nio-8080-exec-6] WARN  com.tripplanner.controller.ItinerariesController - Normalized itinerary not found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:51.204 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:22:51.204 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 17:22:51.204 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-09-24 17:22:51.204 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:22:52.219 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:52.220 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:52.220 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:22:52.220 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:22:52.220 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 2: Running PlannerAgent
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION START ===
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent ID: ffa4b73e-54e5-4fd9-af67-4f2b43676444
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Type: ItineraryDto
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Data: CreateItineraryReq(destination=Paris, France, startDate=2025-10-04, endDate=2025-10-07, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Details: CreateItineraryReq(destination=Paris, France, startDate=2025-10-04, endDate=2025-10-07, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: ffa4b73e-54e5-4fd9-af67-4f2b43676444
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: queued
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent queued for execution
2025-09-24 17:22:52.389 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:22:52.390 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:52:52.389554200Z
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: ffa4b73e-54e5-4fd9-af67-4f2b43676444
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent started
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:52:52.394142600Z
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.394 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Executing agent-specific logic for: planner
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROCESSING ===
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Destination: Paris, France
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Start Date: 2025-10-04
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - End Date: 2025-10-07
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Duration: 3 days
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Party: 1 adults
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Budget Tier: mid-range
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Interests: [relaxation, nature, cuisine]
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Constraints: [budgetFriendly]
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Language: en
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =================================
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: ffa4b73e-54e5-4fd9-af67-4f2b43676444
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 10
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Analyzing trip requirements
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: requirement_analysis
2025-09-24 17:22:52.395 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:52:52.395147500Z
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: ffa4b73e-54e5-4fd9-af67-4f2b43676444
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 30
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Generating itinerary structure
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: structure_generation
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:52:52.396148200Z
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.396 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROMPTS ===
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.agents.PlannerAgent - System Prompt Length: 1488 chars
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.agents.PlannerAgent - User Prompt: Create a detailed normalized itinerary for the following trip:

Itinerary ID: -2091310822_1758714772396
Destination: Paris, France
Start Date: 2025-10-04
End Date: 2025-10-07
Duration: 3 days
Party: 1 adults
Budget Tier: mid-range
Language: en
Interests: relaxation, nature, cuisine
Constraints: budgetFriendly
Themes: relaxation, nature, cuisine
Currency: INR

IMPORTANT: Create a comprehensive normalized itinerary with nodes and edges that maximizes the travel experience while staying within the specified parameters.
You MUST populate ALL 3 days with meaningful activities, meals, and transportation.
Each day should have at least 3-5 nodes including attractions, meals, and transport as appropriate.
Do NOT leave any days with empty nodes arrays.
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: ffa4b73e-54e5-4fd9-af67-4f2b43676444
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 50
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Processing with AI model
2025-09-24 17:22:52.397 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: ai_processing
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:52:52.397147400Z
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.GeminiClient - === GEMINI CONTENT GENERATION REQUEST ===
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.GeminiClient - Model: gemini-1.5-pro
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.GeminiClient - Temperature: 0.7
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.GeminiClient - Max Tokens: 8192
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.GeminiClient - Mock Mode: false
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.GeminiClient - User Prompt Length: 6765
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.GeminiClient - System Prompt Length: 0
2025-09-24 17:22:52.398 [task-1] INFO  com.tripplanner.service.GeminiClient - User Prompt Preview: You are an expert travel planner AI that creates detailed, personalized itineraries using a normalized structure.

Your responsibilities:
1. Create day-by-day itineraries based on traveler preferences...
2025-09-24 17:22:52.399 [task-1] INFO  com.tripplanner.service.GeminiClient - Request Body Length: 7553
2025-09-24 17:22:52.401 [task-1] INFO  com.tripplanner.service.GeminiClient - Sending request to Gemini API...
2025-09-24 17:22:52.613 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.613 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:22:52.613 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_718baa50-1345-481b-8eab-ccba3245592e', version=1, summary='Your  (truncated)...]
2025-09-24 17:22:52.614 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:22:52.614 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:22:52.940 [task-1] INFO  com.tripplanner.service.GeminiClient - === GEMINI API RESPONSE ===
2025-09-24 17:22:52.940 [task-1] INFO  com.tripplanner.service.GeminiClient - Status Code: 429
2025-09-24 17:22:52.940 [task-1] INFO  com.tripplanner.service.GeminiClient - Response Length: 2124
2025-09-24 17:22:52.940 [task-1] INFO  com.tripplanner.service.GeminiClient - Response Body: {
  "error": {
    "code": 429,
    "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0\nPlease retry in 9.26413915s.",
    "status": "RESOURCE_EXHAUSTED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.QuotaFailure",
        "violations": [
          {
            "quotaMetric": "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count",
            "quotaId": "GenerateContentInputTokensPerModelPerMinute-FreeTier",
            "quotaDimensions": {
              "location": "global",
              "model": "gemini-1.5-pro"
            }
          },
          {
            "quotaMetric": "generativelanguage.googleapis.com/generate_content_free_tier_requests",
            "quotaId": "GenerateRequestsPerMinutePerProjectPerModel-FreeTier",
            "quotaDimensions": {
              "location": "global",
              "model": "gemini-1.5-pro"
            }
          },
          {
            "quotaMetric": "generativelanguage.googleapis.com/generate_content_free_tier_requests",
            "quotaId": "GenerateRequestsPerDayPerProjectPerModel-FreeTier",
            "quotaDimensions": {
              "location": "global",
              "model": "gemini-1.5-pro"
            }
          }
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Learn more about Gemini API quotas",
            "url": "https://ai.google.dev/gemini-api/docs/rate-limits"
          }
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.RetryInfo",
        "retryDelay": "9s"
      }
    ]
  }
}

2025-09-24 17:22:52.940 [task-1] ERROR com.tripplanner.service.GeminiClient - Gemini API error: 429 - {
  "error": {
    "code": 429,
    "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0\nPlease retry in 9.26413915s.",
    "status": "RESOURCE_EXHAUSTED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.QuotaFailure",
        "violations": [
          {
            "quotaMetric": "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count",
            "quotaId": "GenerateContentInputTokensPerModelPerMinute-FreeTier",
            "quotaDimensions": {
              "location": "global",
              "model": "gemini-1.5-pro"
            }
          },
          {
            "quotaMetric": "generativelanguage.googleapis.com/generate_content_free_tier_requests",
            "quotaId": "GenerateRequestsPerMinutePerProjectPerModel-FreeTier",
            "quotaDimensions": {
              "location": "global",
              "model": "gemini-1.5-pro"
            }
          },
          {
            "quotaMetric": "generativelanguage.googleapis.com/generate_content_free_tier_requests",
            "quotaId": "GenerateRequestsPerDayPerProjectPerModel-FreeTier",
            "quotaDimensions": {
              "location": "global",
              "model": "gemini-1.5-pro"
            }
          }
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Learn more about Gemini API quotas",
            "url": "https://ai.google.dev/gemini-api/docs/rate-limits"
          }
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.RetryInfo",
        "retryDelay": "9s"
      }
    ]
  }
}

2025-09-24 17:22:52.940 [task-1] ERROR com.tripplanner.service.GeminiClient - === GEMINI CONTENT GENERATION FAILED ===
2025-09-24 17:22:52.940 [task-1] ERROR com.tripplanner.service.GeminiClient - User Prompt: You are an expert travel planner AI that creates detailed, personalized itineraries using a normaliz...
2025-09-24 17:22:52.940 [task-1] ERROR com.tripplanner.service.GeminiClient - Error: Gemini API error: 429
java.lang.RuntimeException: Gemini API error: 429
	at com.tripplanner.service.GeminiClient.generateContent(GeminiClient.java:125)
	at com.tripplanner.service.GeminiClient.generateStructuredContent(GeminiClient.java:208)
	at com.tripplanner.agents.PlannerAgent.executeInternal(PlannerAgent.java:80)
	at com.tripplanner.agents.BaseAgent.execute(BaseAgent.java:52)
	at com.tripplanner.agents.AgentOrchestrator.generateNormalizedItinerary(AgentOrchestrator.java:96)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:74)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-24 17:22:52.943 [task-1] ERROR com.tripplanner.service.GeminiClient - =======================================
2025-09-24 17:22:52.944 [task-1] ERROR com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION FAILED ===
2025-09-24 17:22:52.944 [task-1] ERROR com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:22:52.944 [task-1] ERROR com.tripplanner.agents.PlannerAgent - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.944 [task-1] ERROR com.tripplanner.agents.PlannerAgent - Error: Failed to generate content with Gemini: Gemini API error: 429
java.lang.RuntimeException: Failed to generate content with Gemini: Gemini API error: 429
	at com.tripplanner.service.GeminiClient.generateContent(GeminiClient.java:165)
	at com.tripplanner.service.GeminiClient.generateStructuredContent(GeminiClient.java:208)
	at com.tripplanner.agents.PlannerAgent.executeInternal(PlannerAgent.java:80)
	at com.tripplanner.agents.BaseAgent.execute(BaseAgent.java:52)
	at com.tripplanner.agents.AgentOrchestrator.generateNormalizedItinerary(AgentOrchestrator.java:96)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:74)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Gemini API error: 429
	at com.tripplanner.service.GeminiClient.generateContent(GeminiClient.java:125)
	... 17 common frames omitted
2025-09-24 17:22:52.944 [task-1] ERROR com.tripplanner.agents.PlannerAgent - ==============================
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: ffa4b73e-54e5-4fd9-af67-4f2b43676444
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: failed
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent failed: Failed to generate content with Gemini: Gemini API error: 429
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:22:52.944 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:52:52.944760200Z
2025-09-24 17:22:52.945 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:52.945 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:22:52.945 [task-1] ERROR com.tripplanner.agents.AgentOrchestrator - Failed to generate normalized itinerary for ID: it_718baa50-1345-481b-8eab-ccba3245592e
java.lang.RuntimeException: Agent execution failed: Failed to generate content with Gemini: Gemini API error: 429
	at com.tripplanner.agents.BaseAgent.execute(BaseAgent.java:77)
	at com.tripplanner.agents.AgentOrchestrator.generateNormalizedItinerary(AgentOrchestrator.java:96)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:74)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to generate content with Gemini: Gemini API error: 429
	at com.tripplanner.service.GeminiClient.generateContent(GeminiClient.java:165)
	at com.tripplanner.service.GeminiClient.generateStructuredContent(GeminiClient.java:208)
	at com.tripplanner.agents.PlannerAgent.executeInternal(PlannerAgent.java:80)
	at com.tripplanner.agents.BaseAgent.execute(BaseAgent.java:52)
	... 14 common frames omitted
Caused by: java.lang.RuntimeException: Gemini API error: 429
	at com.tripplanner.service.GeminiClient.generateContent(GeminiClient.java:125)
	... 17 common frames omitted
2025-09-24 17:22:55.874 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:55.874 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:55.874 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:22:55.875 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:22:55.875 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:56.187 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:56.188 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:22:56.188 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_718baa50-1345-481b-8eab-ccba3245592e', version=1, summary='Your  (truncated)...]
2025-09-24 17:22:56.188 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:22:56.188 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:22:56.200 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:56.200 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:56.201 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:22:56.201 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:22:56.201 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:57.351 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:57.352 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:22:57.352 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_718baa50-1345-481b-8eab-ccba3245592e', version=1, summary='Your  (truncated)...]
2025-09-24 17:22:57.352 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:22:57.352 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:22:57.354 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:57.354 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:22:57.354 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:22:57.354 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:22:57.354 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:57.659 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:22:57.659 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:22:57.659 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_718baa50-1345-481b-8eab-ccba3245592e', version=1, summary='Your  (truncated)...]
2025-09-24 17:22:57.660 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:22:57.660 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:24:20.420 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/org.json/json/20180130/26ba2ec0e791a32ea5dfbedfcebf36447ee5b12c/json-20180130.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-09-24 17:24:20.427 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Starting SimpleIntegrationTest using Java 17.0.12 with PID 3280 (started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:24:20.428 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:24:20.439 [Test worker] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5c740c5a
2025-09-24 17:24:21.175 [Test worker] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: qwen/qwen-2.5-7b-instruct:free
2025-09-24 17:24:21.177 [Test worker] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:24:21.179 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:24:21.180 [Test worker] WARN  o.s.w.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentOrchestrator' defined in file [C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main\com\tripplanner\agents\AgentOrchestrator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'plannerAgent' defined in file [C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main\com\tripplanner\agents\PlannerAgent.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'aiClient' defined in class path resource [com/tripplanner/config/AiClientConfig.class]: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
2025-09-24 17:24:21.181 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:24:21.181 [Test worker] INFO  c.tripplanner.service.openrouter.OpenRouterClient - OpenRouter client cleanup completed
2025-09-24 17:24:21.198 [Test worker] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-24 17:24:21.217 [Test worker] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentOrchestrator' defined in file [C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main\com\tripplanner\agents\AgentOrchestrator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'plannerAgent' defined in file [C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main\com\tripplanner\agents\PlannerAgent.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'aiClient' defined in class path resource [com/tripplanner/config/AiClientConfig.class]: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:122)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:72)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'plannerAgent' defined in file [C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main\com\tripplanner\agents\PlannerAgent.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'aiClient' defined in class path resource [com/tripplanner/config/AiClientConfig.class]: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1690)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1635)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 119 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'aiClient' defined in class path resource [com/tripplanner/config/AiClientConfig.class]: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1690)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1635)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 132 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 145 common frames omitted
Caused by: java.lang.IllegalStateException: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at com.tripplanner.config.AiClientConfig.aiClient(AiClientConfig.java:50)
	at com.tripplanner.config.AiClientConfig$$SpringCGLIB$$0.CGLIB$aiClient$0(<generated>)
	at com.tripplanner.config.AiClientConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.tripplanner.config.AiClientConfig$$SpringCGLIB$$0.aiClient(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 148 common frames omitted
2025-09-24 17:24:21.227 [Test worker] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.tripplanner.api.SimpleIntegrationTest@26f07261]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3e371088 testClass = com.tripplanner.api.SimpleIntegrationTest, locations = [], classes = [com.tripplanner.App], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE", "spring.jpa.hibernate.ddl-auto=create-drop", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a9a8ec3, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@645dc557, [ImportsContextCustomizer@3a5b1af7 key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60fc7f43, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77b71c9, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1f45db49, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@7f8c48f3, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@523fca14], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:122)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:72)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentOrchestrator' defined in file [C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main\com\tripplanner\agents\AgentOrchestrator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'plannerAgent' defined in file [C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main\com\tripplanner\agents\PlannerAgent.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'aiClient' defined in class path resource [com/tripplanner/config/AiClientConfig.class]: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 93 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'plannerAgent' defined in file [C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main\com\tripplanner\agents\PlannerAgent.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'aiClient' defined in class path resource [com/tripplanner/config/AiClientConfig.class]: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1690)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1635)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 119 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'aiClient' defined in class path resource [com/tripplanner/config/AiClientConfig.class]: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1690)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1635)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 132 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.tripplanner.service.ai.AiClient]: Factory method 'aiClient' threw exception with message: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 145 common frames omitted
Caused by: java.lang.IllegalStateException: No AI client available. Configure GEMINI_API_KEY or OPENROUTER_API_KEY.
	at com.tripplanner.config.AiClientConfig.aiClient(AiClientConfig.java:50)
	at com.tripplanner.config.AiClientConfig$$SpringCGLIB$$0.CGLIB$aiClient$0(<generated>)
	at com.tripplanner.config.AiClientConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.tripplanner.config.AiClientConfig$$SpringCGLIB$$0.aiClient(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 148 common frames omitted
2025-09-24 17:24:21.239 [Test worker] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.tripplanner.api.SimpleIntegrationTest@5f1db390]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3e371088 testClass = com.tripplanner.api.SimpleIntegrationTest, locations = [], classes = [com.tripplanner.App], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE", "spring.jpa.hibernate.ddl-auto=create-drop", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a9a8ec3, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@645dc557, [ImportsContextCustomizer@3a5b1af7 key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60fc7f43, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77b71c9, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1f45db49, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@7f8c48f3, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@523fca14], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:122)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:72)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-09-24 17:24:21.244 [Test worker] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.tripplanner.api.SimpleIntegrationTest@1fce6eb4]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3e371088 testClass = com.tripplanner.api.SimpleIntegrationTest, locations = [], classes = [com.tripplanner.App], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE", "spring.jpa.hibernate.ddl-auto=create-drop", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a9a8ec3, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@645dc557, [ImportsContextCustomizer@3a5b1af7 key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60fc7f43, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77b71c9, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1f45db49, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@7f8c48f3, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@523fca14], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:122)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:72)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-09-24 17:25:05.749 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/org.json/json/20180130/26ba2ec0e791a32ea5dfbedfcebf36447ee5b12c/json-20180130.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/user/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-09-24 17:25:05.762 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Starting SimpleIntegrationTest using Java 17.0.12 with PID 32512 (started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:25:05.762 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:25:05.775 [Test worker] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@639aba11
2025-09-24 17:25:06.554 [Test worker] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: qwen/qwen-2.5-7b-instruct:free
2025-09-24 17:25:06.557 [Test worker] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:25:06.558 [Test worker] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:25:06.707 [Test worker] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:25:07.008 [Test worker] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:25:07.180 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 29 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:25:07.229 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:25:07.257 [Test worker] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:25:07.322 [Test worker] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:25:07.491 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:25:07.527 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:25:07.620 [Test worker] INFO  com.tripplanner.api.SimpleIntegrationTest - Started SimpleIntegrationTest in 2.106 seconds (process running for 2.898)
2025-09-24 17:25:08.037 [Test worker] INFO  o.s.b.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:25:08.037 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:25:08.038 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-24 17:25:08.059 [Test worker] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-09-24 17:25:08.088 [Test worker] INFO  o.s.b.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:25:08.088 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:25:08.088 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:25:08.089 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.PingController#ping()
2025-09-24 17:25:08.102 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-09-24 17:25:08.103 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing ["pong"]
2025-09-24 17:25:08.236 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 1 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-24 17:25:08.239 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:25:08.239 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:25:08.240 [Test worker] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:25:08.240 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:25:08.241 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-24 17:25:08.285 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ChatController#route(ChatRequest)
2025-09-24 17:25:08.320 [Test worker] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [ChatRequest{itineraryId='null', scope='null', day=null, selectedNodeId='null', text='null', autoAppl (truncated)...]
2025-09-24 17:25:08.397 [Test worker] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.tripplanner.dto.ChatResponse> com.tripplanner.controller.ChatController.route(com.tripplanner.dto.ChatRequest) with 3 errors: [Field error in object 'chatRequest' on field 'scope': rejected value [null]; codes [NotNull.chatRequest.scope,NotNull.scope,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [chatRequest.scope,scope]; arguments []; default message [scope]]; default message [Scope is required]] [Field error in object 'chatRequest' on field 'text': rejected value [null]; codes [NotBlank.chatRequest.text,NotBlank.text,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [chatRequest.text,text]; arguments []; default message [text]]; default message [Text is required]] [Field error in object 'chatRequest' on field 'itineraryId': rejected value [null]; codes [NotBlank.chatRequest.itineraryId,NotBlank.itineraryId,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [chatRequest.itineraryId,itineraryId]; arguments []; default message [itineraryId]]; default message [Itinerary ID is required]] ]
2025-09-24 17:25:08.406 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 1 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-24 17:25:08.407 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:25:08.409 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:25:08.410 [Test worker] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:25:08.410 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:25:08.410 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:25:08.425 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ChatController#route(ChatRequest)
2025-09-24 17:25:08.428 [Test worker] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [ChatRequest{itineraryId='it_123', scope='trip', day=null, selectedNodeId='null', text='Move non-exis (truncated)...]
2025-09-24 17:25:08.431 [Test worker] INFO  com.tripplanner.controller.ChatController - === CHAT CONTROLLER: ROUTING MESSAGE ===
2025-09-24 17:25:08.431 [Test worker] INFO  com.tripplanner.controller.ChatController - Itinerary ID: it_123
2025-09-24 17:25:08.431 [Test worker] INFO  com.tripplanner.controller.ChatController - Scope: trip
2025-09-24 17:25:08.431 [Test worker] INFO  com.tripplanner.controller.ChatController - Day: null
2025-09-24 17:25:08.431 [Test worker] INFO  com.tripplanner.controller.ChatController - Selected Node ID: null
2025-09-24 17:25:08.432 [Test worker] INFO  com.tripplanner.controller.ChatController - Text: Move non-existent place
2025-09-24 17:25:08.432 [Test worker] INFO  com.tripplanner.controller.ChatController - Auto Apply: false
2025-09-24 17:25:08.435 [Test worker] INFO  com.tripplanner.controller.ChatController - === CHAT ROUTING COMPLETE ===
2025-09-24 17:25:08.435 [Test worker] INFO  com.tripplanner.controller.ChatController - Intent: ERROR
2025-09-24 17:25:08.435 [Test worker] INFO  com.tripplanner.controller.ChatController - Message: No matching places found
2025-09-24 17:25:08.435 [Test worker] INFO  com.tripplanner.controller.ChatController - Applied: false
2025-09-24 17:25:08.435 [Test worker] INFO  com.tripplanner.controller.ChatController - Needs Disambiguation: false
2025-09-24 17:25:08.438 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:08.443 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ChatResponse{intent='ERROR', message='No matching places found', changeSet=null, diff=null, applied= (truncated)...]
2025-09-24 17:25:08.503 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 1 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-24 17:25:08.504 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:25:08.504 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:25:08.504 [Test worker] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:25:08.504 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:25:08.505 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-24 17:25:08.507 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ChatController#route(ChatRequest)
2025-09-24 17:25:08.510 [Test worker] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [ChatRequest{itineraryId='it_123', scope='trip', day=null, selectedNodeId='null', text='Move Sagrada' (truncated)...]
2025-09-24 17:25:08.514 [Test worker] INFO  com.tripplanner.controller.ChatController - === CHAT CONTROLLER: ROUTING MESSAGE ===
2025-09-24 17:25:08.515 [Test worker] INFO  com.tripplanner.controller.ChatController - Itinerary ID: it_123
2025-09-24 17:25:08.515 [Test worker] INFO  com.tripplanner.controller.ChatController - Scope: trip
2025-09-24 17:25:08.515 [Test worker] INFO  com.tripplanner.controller.ChatController - Day: null
2025-09-24 17:25:08.515 [Test worker] INFO  com.tripplanner.controller.ChatController - Selected Node ID: null
2025-09-24 17:25:08.515 [Test worker] INFO  com.tripplanner.controller.ChatController - Text: Move Sagrada
2025-09-24 17:25:08.515 [Test worker] INFO  com.tripplanner.controller.ChatController - Auto Apply: false
2025-09-24 17:25:08.516 [Test worker] INFO  com.tripplanner.controller.ChatController - === CHAT ROUTING COMPLETE ===
2025-09-24 17:25:08.516 [Test worker] INFO  com.tripplanner.controller.ChatController - Intent: MOVE_TIME
2025-09-24 17:25:08.516 [Test worker] INFO  com.tripplanner.controller.ChatController - Message: Which place did you mean?
2025-09-24 17:25:08.516 [Test worker] INFO  com.tripplanner.controller.ChatController - Applied: false
2025-09-24 17:25:08.516 [Test worker] INFO  com.tripplanner.controller.ChatController - Needs Disambiguation: true
2025-09-24 17:25:08.518 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:08.518 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ChatResponse{intent='MOVE_TIME', message='Which place did you mean?', changeSet=null, diff=null, app (truncated)...]
2025-09-24 17:25:08.527 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 1 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-24 17:25:08.528 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:25:08.529 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:25:08.529 [Test worker] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:25:08.529 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:25:08.529 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:25:08.531 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ChatController#route(ChatRequest)
2025-09-24 17:25:08.533 [Test worker] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [ChatRequest{itineraryId='it_123', scope='trip', day=null, selectedNodeId='null', text='Move lunch to (truncated)...]
2025-09-24 17:25:08.537 [Test worker] INFO  com.tripplanner.controller.ChatController - === CHAT CONTROLLER: ROUTING MESSAGE ===
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - Itinerary ID: it_123
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - Scope: trip
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - Day: null
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - Selected Node ID: null
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - Text: Move lunch to 2pm
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - Auto Apply: false
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - === CHAT ROUTING COMPLETE ===
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - Intent: MOVE_TIME
2025-09-24 17:25:08.538 [Test worker] INFO  com.tripplanner.controller.ChatController - Message: I'll move lunch to 2pm
2025-09-24 17:25:08.539 [Test worker] INFO  com.tripplanner.controller.ChatController - Applied: false
2025-09-24 17:25:08.539 [Test worker] INFO  com.tripplanner.controller.ChatController - Needs Disambiguation: false
2025-09-24 17:25:08.540 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:08.541 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ChatResponse{intent='MOVE_TIME', message='I'll move lunch to 2pm', changeSet=null, diff=null, applie (truncated)...]
2025-09-24 17:25:08.550 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 1 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-24 17:25:08.551 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:25:08.552 [Test worker] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:25:08.552 [Test worker] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-24 17:25:08.552 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-24 17:25:08.552 [Test worker] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-24 17:25:08.554 [Test worker] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ChatController#route(ChatRequest)
2025-09-24 17:25:08.557 [Test worker] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [ChatRequest{itineraryId='it_123', scope='trip', day=null, selectedNodeId='null', text='What's in my  (truncated)...]
2025-09-24 17:25:08.560 [Test worker] INFO  com.tripplanner.controller.ChatController - === CHAT CONTROLLER: ROUTING MESSAGE ===
2025-09-24 17:25:08.560 [Test worker] INFO  com.tripplanner.controller.ChatController - Itinerary ID: it_123
2025-09-24 17:25:08.560 [Test worker] INFO  com.tripplanner.controller.ChatController - Scope: trip
2025-09-24 17:25:08.560 [Test worker] INFO  com.tripplanner.controller.ChatController - Day: null
2025-09-24 17:25:08.560 [Test worker] INFO  com.tripplanner.controller.ChatController - Selected Node ID: null
2025-09-24 17:25:08.560 [Test worker] INFO  com.tripplanner.controller.ChatController - Text: What's in my itinerary?
2025-09-24 17:25:08.560 [Test worker] INFO  com.tripplanner.controller.ChatController - Auto Apply: false
2025-09-24 17:25:08.561 [Test worker] INFO  com.tripplanner.controller.ChatController - === CHAT ROUTING COMPLETE ===
2025-09-24 17:25:08.561 [Test worker] INFO  com.tripplanner.controller.ChatController - Intent: EXPLAIN
2025-09-24 17:25:08.561 [Test worker] INFO  com.tripplanner.controller.ChatController - Message: Your 3-day Barcelona itinerary includes...
2025-09-24 17:25:08.561 [Test worker] INFO  com.tripplanner.controller.ChatController - Applied: false
2025-09-24 17:25:08.561 [Test worker] INFO  com.tripplanner.controller.ChatController - Needs Disambiguation: false
2025-09-24 17:25:08.562 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:08.563 [Test worker] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ChatResponse{intent='EXPLAIN', message='Your 3-day Barcelona itinerary includes...', changeSet=null, (truncated)...]
2025-09-24 17:25:08.613 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@639aba11, started on Wed Sep 24 17:25:05 IST 2025
2025-09-24 17:25:08.621 [SpringApplicationShutdownHook] INFO  com.tripplanner.service.GeminiClient - Gemini client cleanup completed
2025-09-24 17:25:08.621 [SpringApplicationShutdownHook] INFO  c.tripplanner.service.openrouter.OpenRouterClient - OpenRouter client cleanup completed
2025-09-24 17:25:11.805 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 17:25:22.595 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 33236 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:25:22.597 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:25:23.245 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 17:25:23.252 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 17:25:23.252 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 17:25:23.285 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 17:25:23.285 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 662 ms
2025-09-24 17:25:23.312 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 17:25:23.401 [main] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: qwen/qwen-2.5-7b-instruct:free
2025-09-24 17:25:23.403 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:25:23.405 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:25:23.508 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:25:23.771 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:25:23.885 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 29 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:25:23.903 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:25:23.915 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:25:23.955 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:25:23.992 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:25:24.016 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:25:24.095 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 17:25:24.100 [main] INFO  com.tripplanner.App - Started App in 1.811 seconds (process running for 2.162)
2025-09-24 17:25:32.353 [http-nio-8080-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 17:25:32.353 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 17:25:32.354 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-24 17:25:32.354 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-24 17:25:32.354 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-24 17:25:32.354 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@40a7974
2025-09-24 17:25:32.354 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@562f6681
2025-09-24 17:25:32.354 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-24 17:25:32.354 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-24 17:25:32.367 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:25:32.367 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:25:32.380 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:25:32.380 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:25:32.382 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:25:32.382 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_718baa50-1345-481b-8eab-ccba3245592e", parameters={masked}
2025-09-24 17:25:32.383 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:25:32.383 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:25:32.394 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:25:32.394 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:25:32.395 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:25:32.395 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - Request Time: 17:25:32.395685300
2025-09-24 17:25:32.395 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:25:32.396 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@682b0bdc
2025-09-24 17:25:32.396 [http-nio-8080-exec-1] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:25:32.396 [http-nio-8080-exec-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:25:32.396 [http-nio-8080-exec-1] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@682b0bdc
2025-09-24 17:25:32.396 [http-nio-8080-exec-1] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_718baa50-1345-481b-8eab-ccba3245592e: 1
2025-09-24 17:25:32.396 [http-nio-8080-exec-1] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 1
2025-09-24 17:25:32.396 [http-nio-8080-exec-1] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:25:32.397 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:25:32.398 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:25:32.398 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:25:32.398 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:25:32.398 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:25:32.400 [http-nio-8080-exec-1] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:25:32.405 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:25:32.406 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:34.557 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:25:34.566 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:34.569 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_718baa50-1345-481b-8eab-ccba3245592e', version=1, summary='Your  (truncated)...]
2025-09-24 17:25:34.577 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:25:34.577 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:48.099 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/itineraries
2025-09-24 17:25:48.100 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/itineraries
2025-09-24 17:25:48.100 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/itineraries", parameters={}
2025-09-24 17:25:48.100 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#create(CreateItineraryReq)
2025-09-24 17:25:48.111 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateItineraryReq(destination=Paris, France, startDate=2025-10-15, endDate=2025-10-18, party=PartyD (truncated)...]
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Creating itinerary
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Request: CreateItineraryReq(destination=Paris, France, startDate=2025-10-15, endDate=2025-10-18, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY REQUEST ===
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - Request Details:
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   Destination: Paris, France
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   Start Date: 2025-10-15
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   End Date: 2025-10-18
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   Duration: 3 days
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   Budget Tier: mid-range
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   Language: en
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   Party: 1 adults, 0 children, 0 infants, 1 rooms
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   Interests: relaxation, nature, cuisine
2025-09-24 17:25:48.131 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService -   Constraints: budgetFriendly
2025-09-24 17:25:48.134 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - === AGENT ORCHESTRATOR: NORMALIZED ITINERARY GENERATION ===
2025-09-24 17:25:48.134 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.135 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Destination: Paris, France
2025-09-24 17:25:48.135 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 1: Creating initial itinerary structure
2025-09-24 17:25:48.135 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY RESPONSE ===
2025-09-24 17:25:48.135 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.135 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - Status: generating
2025-09-24 17:25:48.135 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - Orchestration started: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.135 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - =====================================
2025-09-24 17:25:48.135 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Itinerary created successfully: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.140 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:48.145 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ItineraryDto(id=it_b1790b00-1683-4868-a3a8-8612621c88de, destination=Paris, France, startDate=2025-1 (truncated)...]
2025-09-24 17:25:48.146 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:25:48.147 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:48.157 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:48.157 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.158 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.158 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de", parameters={masked}
2025-09-24 17:25:48.158 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Request Time: 17:25:48.159285200
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@b4fd473
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:25:48.159 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.159 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@b4fd473
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_b1790b00-1683-4868-a3a8-8612621c88de: 1
2025-09-24 17:25:48.159 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json", parameters={}
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 2
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:25:48.159 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:25:48.159 [http-nio-8080-exec-5] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:25:48.159 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.160 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:25:48.160 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:48.554 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 2: Running PlannerAgent
2025-09-24 17:25:48.554 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION START ===
2025-09-24 17:25:48.554 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Type: ItineraryDto
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Data: CreateItineraryReq(destination=Paris, France, startDate=2025-10-15, endDate=2025-10-18, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Details: CreateItineraryReq(destination=Paris, France, startDate=2025-10-15, endDate=2025-10-18, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: queued
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent queued for execution
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:25:48.555 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:48.555971800Z
2025-09-24 17:25:48.559 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.559 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:48.559 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:48.559 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent started
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:48.559971800Z
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Executing agent-specific logic for: planner
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROCESSING ===
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Destination: Paris, France
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Start Date: 2025-10-15
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.agents.PlannerAgent - End Date: 2025-10-18
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Duration: 3 days
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Party: 1 adults
2025-09-24 17:25:48.560 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Budget Tier: mid-range
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Interests: [relaxation, nature, cuisine]
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Constraints: [budgetFriendly]
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Language: en
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =================================
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 10
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Analyzing trip requirements
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: requirement_analysis
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:48.561972Z
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.561 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 30
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Generating itinerary structure
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: structure_generation
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:48.563476100Z
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.563 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:48.564 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROMPTS ===
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.agents.PlannerAgent - System Prompt Length: 1488 chars
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.agents.PlannerAgent - User Prompt: Create a detailed normalized itinerary for the following trip:

Itinerary ID: -2091310822_1758714948563
Destination: Paris, France
Start Date: 2025-10-15
End Date: 2025-10-18
Duration: 3 days
Party: 1 adults
Budget Tier: mid-range
Language: en
Interests: relaxation, nature, cuisine
Constraints: budgetFriendly
Themes: relaxation, nature, cuisine
Currency: INR

IMPORTANT: Create a comprehensive normalized itinerary with nodes and edges that maximizes the travel experience while staying within the specified parameters.
You MUST populate ALL 3 days with meaningful activities, meals, and transportation.
Each day should have at least 3-5 nodes including attractions, meals, and transport as appropriate.
Do NOT leave any days with empty nodes arrays.
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 50
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Processing with AI model
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: ai_processing
2025-09-24 17:25:48.565 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:48.565480800Z
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT RESPONSE ===
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Using JSON file response
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Response Length: 2 chars
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Response Preview: {}
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.agents.PlannerAgent - ===============================
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 80
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Parsing generated itinerary
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: parsing
2025-09-24 17:25:48.566 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:48.566481300Z
2025-09-24 17:25:48.567 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.567 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:48.571 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT RESULT ===
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Parsed Response Type: NormalizedItinerary
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Days Generated: 0
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Result: NormalizedItinerary{itineraryId='it_b1790b00-1683-4868-a3a8-8612621c88de', version=null, summary='null', currency='null', themes=null, days=null, settings=null, agents=null}
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.agents.PlannerAgent - ============================
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 90
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Finalizing itinerary
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: finalization
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:48.572480600Z
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:48.572 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:49.837 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.837 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:49.838 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_b1790b00-1683-4868-a3a8-8612621c88de', version=1, summary='Your  (truncated)...]
2025-09-24 17:25:49.838 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:25:49.838 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:49.858 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === CONVERTING NORMALIZED TO ITINERARY DTO ===
2025-09-24 17:25:49.858 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.858 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Summary: null
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Days count: 0
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === NORMALIZED CONVERSION COMPLETED ===
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Generated itinerary with 0 days
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT FINAL RESULT ===
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Converted to ItineraryDto: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Final Result: ItineraryDto(id=it_b1790b00-1683-4868-a3a8-8612621c88de, destination=Paris, France, startDate=2025-10-15, endDate=2025-10-18, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en, summary=null, map=null, days=[], agentResults={currency=null}, status=completed, createdAt=2025-09-24T11:55:49.859150700Z, updatedAt=2025-09-24T11:55:49.859150700Z, isPublic=false, shareToken=null)
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - ==================================
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: succeeded
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent completed successfully
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:49.859150700Z
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION COMPLETED ===
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.859 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Result Type: ItineraryDto
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Result: ItineraryDto(id=it_b1790b00-1683-4868-a3a8-8612621c88de, destination=Paris, France, startDate=2025-10-15, endDate=2025-10-18, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en, summary=null, map=null, days=[], agentResults={currency=null}, status=completed, createdAt=2025-09-24T11:55:49.859150700Z, updatedAt=2025-09-24T11:55:49.859150700Z, isPublic=false, shareToken=null)
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =================================
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - PlannerAgent completed, database already updated
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 3: Running EnrichmentAgent
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - === AGENT EXECUTION START ===
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Agent Kind: planner
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Request Type: ApplyResult
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Request Data: null
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Request Details: null
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - =============================
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: queued
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent queued for execution
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:25:49.860 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:49.860149200Z
2025-09-24 17:25:49.861 [task-1] WARN  com.tripplanner.service.AgentEventBus - Failed to send event to SSE emitter for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de (client likely disconnected)
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 0 emitters successfully, 1 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:25:49.861 [http-nio-8080-exec-7] DEBUG o.s.web.context.request.async.WebAsyncManager - Servlet container error notification for "/api/v1/agents/stream"
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent started
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:49.861150100Z
2025-09-24 17:25:49.861 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.861 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.861 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:49.861 [http-nio-8080-exec-7] WARN  com.tripplanner.controller.AgentController - SSE stream ended for itinerary it_b1790b00-1683-4868-a3a8-8612621c88de due to: java.io.IOException: An established connection was aborted by the software in your host machine
2025-09-24 17:25:49.862 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Executing agent-specific logic for: planner
2025-09-24 17:25:49.862 [http-nio-8080-exec-7] DEBUG o.s.web.context.request.async.WebAsyncManager - Async result set for "/api/v1/agents/stream"
2025-09-24 17:25:49.862 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - === ENRICHMENT AGENT PROCESSING ===
2025-09-24 17:25:49.862 [http-nio-8080-exec-7] DEBUG o.s.web.context.request.async.WebAsyncManager - Performing async dispatch for "/api/v1/agents/stream"
2025-09-24 17:25:49.862 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de", parameters={masked}
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - Request Time: 17:25:49.862150100
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@4ff008d1
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@4ff008d1
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_b1790b00-1683-4868-a3a8-8612621c88de: 1
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 2
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:25:49.862 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:25:49.863 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:25:49.863 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.863 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:25:49.863 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:25:49.863 [http-nio-8080-exec-8] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:25:49.864 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:25:49.864 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:49.866 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.866 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:49.866 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - "ASYNC" dispatch for GET "/api/v1/agents/stream?itineraryId=it_b1790b00-1683-4868-a3a8-8612621c88de", parameters={masked}
2025-09-24 17:25:49.867 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Resume with async result [java.io.IOException: An established connection was aborted by the software in your host machine]
2025-09-24 17:25:49.870 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.tripplanner.controller.GlobalExceptionHandler#handleIOException(IOException, WebRequest)
2025-09-24 17:25:49.871 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Found 'Content-Type:text/event-stream' in response
2025-09-24 17:25:49.872 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.io.IOException: An established connection was aborted by the software in your host machine]
2025-09-24 17:25:49.872 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ASYNC" dispatch, status 200
2025-09-24 17:25:49.874 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 10
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Loading itinerary
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: loading
2025-09-24 17:25:50.266 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:50.266753700Z
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 30
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Validating opening hours
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: validation
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:50.267754100Z
2025-09-24 17:25:50.267 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 50
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Calculating pacing
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: pacing
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:50.268753700Z
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.268 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 70
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Computing transit durations
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: transit
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:50.269754800Z
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 90
2025-09-24 17:25:50.269 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Applying enrichments
2025-09-24 17:25:50.270 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: applying
2025-09-24 17:25:50.270 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:50.269754800Z
2025-09-24 17:25:50.270 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.270 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:50.270 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: No enrichments needed
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: complete
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:50.270754200Z
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - === NO ENRICHMENTS APPLIED ===
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: succeeded
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent completed successfully
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:25:50.271 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:55:50.271257600Z
2025-09-24 17:25:50.272 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.272 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:25:50.272 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - === AGENT EXECUTION COMPLETED ===
2025-09-24 17:25:50.272 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Agent Kind: planner
2025-09-24 17:25:50.272 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:50.272 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Result Type: null
2025-09-24 17:25:50.272 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Result: null
2025-09-24 17:25:50.272 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - =================================
2025-09-24 17:25:50.874 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:50.874 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:50.874 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json", parameters={}
2025-09-24 17:25:50.875 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:25:50.875 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:51.556 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - === NORMALIZED ITINERARY GENERATION COMPLETE ===
2025-09-24 17:25:51.556 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Final itinerary has 0 days
2025-09-24 17:25:51.942 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:51.942 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:51.942 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_b1790b00-1683-4868-a3a8-8612621c88de', version=null, summary='nu (truncated)...]
2025-09-24 17:25:51.942 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:25:51.942 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:52.947 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:52.948 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:52.948 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json", parameters={}
2025-09-24 17:25:52.948 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:25:52.948 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:53.315 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:53.315 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:53.315 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_b1790b00-1683-4868-a3a8-8612621c88de', version=null, summary='nu (truncated)...]
2025-09-24 17:25:53.316 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:25:53.316 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:53.326 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:53.326 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:53.326 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json", parameters={}
2025-09-24 17:25:53.326 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:25:53.327 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:54.656 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:54.657 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:54.657 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_b1790b00-1683-4868-a3a8-8612621c88de', version=null, summary='nu (truncated)...]
2025-09-24 17:25:54.657 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:25:54.657 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:25:55.661 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:55.662 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json
2025-09-24 17:25:55.662 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de/json", parameters={}
2025-09-24 17:25:55.662 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:25:55.662 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:56.009 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:25:56.009 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:25:56.009 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_b1790b00-1683-4868-a3a8-8612621c88de', version=null, summary='nu (truncated)...]
2025-09-24 17:25:56.009 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:25:56.009 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:30.585 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:26:30.585 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:26:30.585 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:26:30.585 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:26:30.585 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:26:30.995 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Found 3 itineraries
2025-09-24 17:26:30.998 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:30.998 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_b1790b00-1683-4868-a3a8-8612621c88de, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 17:26:30.998 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:30.999 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:33.860 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:26:33.860 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:26:33.860 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:26:33.860 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:26:33.860 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:34.210 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:34.210 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:34.210 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_718baa50-1345-481b-8eab-ccba3245592e', version=1, summary='Your  (truncated)...]
2025-09-24 17:26:34.211 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:34.211 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:34.212 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:26:34.212 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:26:34.212 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:26:34.212 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:26:34.212 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:35.538 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:35.538 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:35.538 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_718baa50-1345-481b-8eab-ccba3245592e', version=1, summary='Your  (truncated)...]
2025-09-24 17:26:35.539 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:35.539 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:35.956 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:26:35.956 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:26:35.956 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:26:35.956 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:26:35.956 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:26:36.339 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Found 3 itineraries
2025-09-24 17:26:36.339 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:36.340 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_b1790b00-1683-4868-a3a8-8612621c88de, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 17:26:36.341 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:36.341 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:36.914 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:26:36.914 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:26:36.914 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:26:36.914 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json
2025-09-24 17:26:36.914 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:26:36.914 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e/json", parameters={}
2025-09-24 17:26:36.914 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:26:36.914 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:26:36.915 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:26:36.915 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:37.649 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Found 3 itineraries
2025-09-24 17:26:37.650 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:37.650 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_b1790b00-1683-4868-a3a8-8612621c88de, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 17:26:37.650 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:37.650 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:38.584 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:38.585 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:38.585 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_718baa50-1345-481b-8eab-ccba3245592e', version=1, summary='Your  (truncated)...]
2025-09-24 17:26:38.585 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:38.586 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:42.147 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:42.149 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing DELETE /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:42.149 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured DELETE /api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:42.149 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - DELETE "/api/v1/itineraries/it_718baa50-1345-481b-8eab-ccba3245592e", parameters={}
2025-09-24 17:26:42.149 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#delete(String)
2025-09-24 17:26:42.150 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Deleting itinerary: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:42.150 [http-nio-8080-exec-10] INFO  com.tripplanner.service.ItineraryService - Deleting itinerary: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:42.538 [http-nio-8080-exec-10] INFO  com.tripplanner.service.ItineraryService - Itinerary deleted: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:42.538 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Itinerary deleted successfully: it_718baa50-1345-481b-8eab-ccba3245592e
2025-09-24 17:26:42.538 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:42.539 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 17:26:42.539 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-09-24 17:26:42.539 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:42.541 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:26:42.541 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:26:42.541 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:26:42.541 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:26:42.541 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:26:43.799 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Found 2 itineraries
2025-09-24 17:26:43.799 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:43.799 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_b1790b00-1683-4868-a3a8-8612621c88de, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 17:26:43.800 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:43.800 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:45.283 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:26:45.284 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing DELETE /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:26:45.285 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured DELETE /api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:26:45.285 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - DELETE "/api/v1/itineraries/it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b", parameters={}
2025-09-24 17:26:45.285 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#delete(String)
2025-09-24 17:26:45.285 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Deleting itinerary: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:26:45.285 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - Deleting itinerary: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:26:45.655 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - Itinerary deleted: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:26:45.655 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Itinerary deleted successfully: it_ceba83d0-5fc5-485b-acb2-4441ecaa9e9b
2025-09-24 17:26:45.655 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:45.655 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 17:26:45.655 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-09-24 17:26:45.656 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:45.658 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:26:45.658 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:26:45.658 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:26:45.658 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:26:45.658 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:26:46.946 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 17:26:46.946 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:46.946 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_b1790b00-1683-4868-a3a8-8612621c88de, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 17:26:46.946 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:46.946 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:48.675 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:26:48.676 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing DELETE /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:26:48.677 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured DELETE /api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:26:48.677 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - DELETE "/api/v1/itineraries/it_b1790b00-1683-4868-a3a8-8612621c88de", parameters={}
2025-09-24 17:26:48.677 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#delete(String)
2025-09-24 17:26:48.677 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Deleting itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:26:48.677 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - Deleting itinerary: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:26:49.064 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - Itinerary deleted: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:26:49.064 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Itinerary deleted successfully: it_b1790b00-1683-4868-a3a8-8612621c88de
2025-09-24 17:26:49.064 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:49.064 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 17:26:49.064 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-09-24 17:26:49.064 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:26:49.066 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:26:49.067 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:26:49.067 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:26:49.067 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:26:49.067 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:26:50.326 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Found 0 itineraries
2025-09-24 17:26:50.326 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:26:50.326 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[]]
2025-09-24 17:26:50.326 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:26:50.326 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:09.307 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/itineraries
2025-09-24 17:27:09.308 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/itineraries
2025-09-24 17:27:09.308 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/itineraries", parameters={}
2025-09-24 17:27:09.308 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#create(CreateItineraryReq)
2025-09-24 17:27:09.308 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateItineraryReq(destination=Greece, Greece, startDate=2025-11-19, endDate=2025-11-22, party=Party (truncated)...]
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Creating itinerary
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Request: CreateItineraryReq(destination=Greece, Greece, startDate=2025-11-19, endDate=2025-11-22, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY REQUEST ===
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService - Request Details:
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   Destination: Greece, Greece
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   Start Date: 2025-11-19
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   End Date: 2025-11-22
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   Duration: 3 days
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   Budget Tier: mid-range
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   Language: en
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   Party: 1 adults, 0 children, 0 infants, 1 rooms
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   Interests: relaxation, nature, cuisine
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService -   Constraints: budgetFriendly
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY RESPONSE ===
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService - Status: generating
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService - Orchestration started: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.service.ItineraryService - =====================================
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Itinerary created successfully: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.309 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - === AGENT ORCHESTRATOR: NORMALIZED ITINERARY GENERATION ===
2025-09-24 17:27:09.309 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.309 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - Destination: Greece, Greece
2025-09-24 17:27:09.309 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - Step 1: Creating initial itinerary structure
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:27:09.309 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ItineraryDto(id=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf, destination=Greece, Greece, startDate=2025- (truncated)...]
2025-09-24 17:27:09.310 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:27:09.310 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:09.319 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:09.320 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.320 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.320 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf", parameters={masked}
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - Request Time: 17:27:09.321676300
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@7fb229ed
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@7fb229ed
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf: 1
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 3
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:27:09.321 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:27:09.321 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:09.321 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:09.321 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json", parameters={}
2025-09-24 17:27:09.322 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:27:09.322 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - Step 2: Running PlannerAgent
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION START ===
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Request Type: ItineraryDto
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Request Data: CreateItineraryReq(destination=Greece, Greece, startDate=2025-11-19, endDate=2025-11-22, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Request Details: CreateItineraryReq(destination=Greece, Greece, startDate=2025-11-19, endDate=2025-11-22, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: queued
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Agent queued for execution
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:09.683329700Z
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.683 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Agent started
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:09.683329700Z
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Executing agent-specific logic for: planner
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROCESSING ===
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Destination: Greece, Greece
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Start Date: 2025-11-19
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - End Date: 2025-11-22
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Duration: 3 days
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Party: 1 adults
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Budget Tier: mid-range
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Interests: [relaxation, nature, cuisine]
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Constraints: [budgetFriendly]
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Language: en
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.agents.PlannerAgent - =================================
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 10
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Analyzing trip requirements
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: requirement_analysis
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:09.684331900Z
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 30
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Generating itinerary structure
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: structure_generation
2025-09-24 17:27:09.684 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:09.684331900Z
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROMPTS ===
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - System Prompt Length: 1488 chars
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - User Prompt: Create a detailed normalized itinerary for the following trip:

Itinerary ID: -1867761010_1758715029685
Destination: Greece, Greece
Start Date: 2025-11-19
End Date: 2025-11-22
Duration: 3 days
Party: 1 adults
Budget Tier: mid-range
Language: en
Interests: relaxation, nature, cuisine
Constraints: budgetFriendly
Themes: relaxation, nature, cuisine
Currency: INR

IMPORTANT: Create a comprehensive normalized itinerary with nodes and edges that maximizes the travel experience while staying within the specified parameters.
You MUST populate ALL 3 days with meaningful activities, meals, and transportation.
Each day should have at least 3-5 nodes including attractions, meals, and transport as appropriate.
Do NOT leave any days with empty nodes arrays.
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 50
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Processing with AI model
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: ai_processing
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:09.685334100Z
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT RESPONSE ===
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Using JSON file response
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Response Length: 2 chars
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Response Preview: {}
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - ===============================
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 80
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Parsing generated itinerary
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: parsing
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:09.685334100Z
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT RESULT ===
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Parsed Response Type: NormalizedItinerary
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Days Generated: 0
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Result: NormalizedItinerary{itineraryId='it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf', version=null, summary='null', currency='null', themes=null, days=null, settings=null, agents=null}
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.agents.PlannerAgent - ============================
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 90
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Finalizing itinerary
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: finalization
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:09.685334100Z
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:09.685 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:10.946 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:10.947 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:27:10.947 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf', version=1, summary='Your  (truncated)...]
2025-09-24 17:27:10.947 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:27:10.947 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === CONVERTING NORMALIZED TO ITINERARY DTO ===
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Summary: null
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Days count: 0
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === NORMALIZED CONVERSION COMPLETED ===
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Generated itinerary with 0 days
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT FINAL RESULT ===
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Converted to ItineraryDto: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Final Result: ItineraryDto(id=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf, destination=Greece, Greece, startDate=2025-11-19, endDate=2025-11-22, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en, summary=null, map=null, days=[], agentResults={currency=null}, status=completed, createdAt=2025-09-24T11:57:11.018475300Z, updatedAt=2025-09-24T11:57:11.018475300Z, isPublic=false, shareToken=null)
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.agents.PlannerAgent - ==================================
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: d7bf67c4-b846-4762-b3c2-cd984eae3efe
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: succeeded
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Agent completed successfully
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:27:11.018 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.018475300Z
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION COMPLETED ===
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Result Type: ItineraryDto
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.PlannerAgent - Result: ItineraryDto(id=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf, destination=Greece, Greece, startDate=2025-11-19, endDate=2025-11-22, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en, summary=null, map=null, days=[], agentResults={currency=null}, status=completed, createdAt=2025-09-24T11:57:11.018475300Z, updatedAt=2025-09-24T11:57:11.018475300Z, isPublic=false, shareToken=null)
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.PlannerAgent - =================================
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - PlannerAgent completed, database already updated
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - Step 3: Running EnrichmentAgent
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - === AGENT EXECUTION START ===
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Agent Kind: planner
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Request Type: ApplyResult
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Request Data: null
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Request Details: null
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - =============================
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: queued
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Agent queued for execution
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.019479300Z
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Agent started
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.019479300Z
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Executing agent-specific logic for: planner
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - === ENRICHMENT AGENT PROCESSING ===
2025-09-24 17:27:11.019 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.021 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.021 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.021 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf", parameters={masked}
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - Request Time: 17:27:11.022483100
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@4b254a63
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@4b254a63
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf: 2
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 3
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:27:11.022 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 10
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Loading itinerary
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: loading
2025-09-24 17:27:11.354 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.354582200Z
2025-09-24 17:27:11.355 [task-2] WARN  com.tripplanner.service.AgentEventBus - Failed to send event to SSE emitter for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf (client likely disconnected)
2025-09-24 17:27:11.355 [http-nio-8080-exec-3] DEBUG o.s.web.context.request.async.WebAsyncManager - Servlet container error notification for "/api/v1/agents/stream"
2025-09-24 17:27:11.355 [http-nio-8080-exec-3] WARN  com.tripplanner.controller.AgentController - SSE stream ended for itinerary it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf due to: java.io.IOException: An established connection was aborted by the software in your host machine
2025-09-24 17:27:11.355 [http-nio-8080-exec-3] DEBUG o.s.web.context.request.async.WebAsyncManager - Async result set for "/api/v1/agents/stream"
2025-09-24 17:27:11.355 [http-nio-8080-exec-3] DEBUG o.s.web.context.request.async.WebAsyncManager - Performing async dispatch for "/api/v1/agents/stream"
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 1 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 30
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Validating opening hours
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: validation
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.355584Z
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 50
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Calculating pacing
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: pacing
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.355584Z
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 70
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Computing transit durations
2025-09-24 17:27:11.355 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: transit
2025-09-24 17:27:11.355 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.355584Z
2025-09-24 17:27:11.356 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - "ASYNC" dispatch for GET "/api/v1/agents/stream?itineraryId=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf", parameters={masked}
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 90
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Applying enrichments
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: applying
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.356586Z
2025-09-24 17:27:11.356 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Resume with async result [java.io.IOException: An established connection was aborted by the software in your host machine]
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: No enrichments needed
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: complete
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.356586Z
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - === NO ENRICHMENTS APPLIED ===
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent ID: e2b8cd1c-e1ae-4ad1-b0ed-ec3e6a344524
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Status: succeeded
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Message: Agent completed successfully
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T11:57:11.356586Z
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - === AGENT EXECUTION COMPLETED ===
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Agent Kind: planner
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Result Type: null
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - Result: null
2025-09-24 17:27:11.356 [task-2] INFO  com.tripplanner.agents.EnrichmentAgent - =================================
2025-09-24 17:27:11.356 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.tripplanner.controller.GlobalExceptionHandler#handleIOException(IOException, WebRequest)
2025-09-24 17:27:11.357 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Found 'Content-Type:text/event-stream' in response
2025-09-24 17:27:11.357 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.io.IOException: An established connection was aborted by the software in your host machine]
2025-09-24 17:27:11.357 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ASYNC" dispatch, status 200
2025-09-24 17:27:11.357 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:12.036 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:12.036 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:12.036 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json", parameters={}
2025-09-24 17:27:12.036 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:27:12.036 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:12.679 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - === NORMALIZED ITINERARY GENERATION COMPLETE ===
2025-09-24 17:27:12.679 [task-2] INFO  com.tripplanner.agents.AgentOrchestrator - Final itinerary has 0 days
2025-09-24 17:27:13.103 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:13.104 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:27:13.104 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf', version=null, summary='nu (truncated)...]
2025-09-24 17:27:13.104 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:27:13.104 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:14.116 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:14.117 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:14.117 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json", parameters={}
2025-09-24 17:27:14.117 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:27:14.117 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:14.461 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:14.461 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:27:14.461 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf', version=null, summary='nu (truncated)...]
2025-09-24 17:27:14.463 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:27:14.463 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:14.471 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:14.471 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:14.471 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json", parameters={}
2025-09-24 17:27:14.473 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:27:14.473 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:15.737 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:15.737 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:27:15.737 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf', version=null, summary='nu (truncated)...]
2025-09-24 17:27:15.737 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:27:15.737 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:27:16.743 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:16.744 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:27:16.744 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json", parameters={}
2025-09-24 17:27:16.744 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:27:16.744 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:17.105 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:27:17.105 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:27:17.105 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf', version=null, summary='nu (truncated)...]
2025-09-24 17:27:17.106 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:27:17.106 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:28:55.240 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:28:55.241 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:28:55.241 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:28:55.241 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:28:55.241 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:28:56.233 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 17:28:56.233 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:28:56.234 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 17:28:56.234 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:28:56.234 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:28:57.300 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:28:57.300 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:28:57.300 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:28:57.300 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:28:57.301 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:28:57.301 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:28:57.301 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:28:57.301 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json", parameters={}
2025-09-24 17:28:57.301 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:28:57.301 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:28:57.618 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 17:28:57.618 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:28:57.618 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 17:28:57.619 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:28:57.619 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:28:58.767 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:28:58.767 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:28:58.767 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf', version=null, summary='nu (truncated)...]
2025-09-24 17:28:58.768 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:28:58.768 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:28:59.773 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:28:59.773 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json
2025-09-24 17:28:59.773 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf/json", parameters={}
2025-09-24 17:28:59.773 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:28:59.774 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:29:00.077 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:29:00.078 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:29:00.078 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf', version=null, summary='nu (truncated)...]
2025-09-24 17:29:00.078 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:29:00.078 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:43:55.763 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 17:43:58.541 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 3376 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:43:58.542 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:43:59.174 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 17:43:59.183 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 17:43:59.183 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 17:43:59.221 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 17:43:59.221 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 656 ms
2025-09-24 17:43:59.250 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 17:43:59.342 [main] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: qwen/qwen-2.5-7b-instruct:free
2025-09-24 17:43:59.345 [main] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: qwen/qwen-2.5-7b-instruct:free
2025-09-24 17:43:59.499 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:43:59.770 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:43:59.801 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:43:59.802 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:43:59.883 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 29 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:43:59.901 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:43:59.914 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:43:59.952 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:43:59.989 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:44:00.015 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:44:00.090 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 17:44:00.094 [main] INFO  com.tripplanner.App - Started App in 1.831 seconds (process running for 2.167)
2025-09-24 17:44:03.465 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 17:44:03.465 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 17:44:03.465 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-24 17:44:03.465 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-24 17:44:03.465 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-24 17:44:03.466 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@65a4b9d6
2025-09-24 17:44:03.466 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@990b86b
2025-09-24 17:44:03.466 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-24 17:44:03.466 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-24 17:44:03.480 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:44:03.497 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:44:03.498 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:44:03.499 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:44:03.504 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:44:05.495 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Found 1 itineraries
2025-09-24 17:44:05.502 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:44:05.506 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf, destination=null, startDate=null, endDate= (truncated)...]
2025-09-24 17:44:05.518 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:44:05.519 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:44:07.155 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:44:07.158 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing DELETE /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:44:07.159 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured DELETE /api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:44:07.159 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - DELETE "/api/v1/itineraries/it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf", parameters={}
2025-09-24 17:44:07.159 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#delete(String)
2025-09-24 17:44:07.166 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Deleting itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:44:07.166 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - Deleting itinerary: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:44:07.538 [http-nio-8080-exec-3] INFO  com.tripplanner.service.ItineraryService - Itinerary deleted: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:44:07.539 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Itinerary deleted successfully: it_6ea903e0-cf80-4400-bcd9-9cc82ff376bf
2025-09-24 17:44:07.539 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:44:07.539 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-24 17:44:07.540 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-09-24 17:44:07.540 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:44:07.545 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:44:07.546 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:44:07.546 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:44:07.546 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:44:07.547 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:44:08.658 [http-nio-8080-exec-2] INFO  com.tripplanner.controller.ItinerariesController - Found 0 itineraries
2025-09-24 17:44:08.658 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:44:08.659 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[]]
2025-09-24 17:44:08.659 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:44:08.659 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:44:30.292 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/itineraries
2025-09-24 17:44:30.293 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/itineraries
2025-09-24 17:44:30.293 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/itineraries", parameters={}
2025-09-24 17:44:30.293 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#create(CreateItineraryReq)
2025-09-24 17:44:30.310 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateItineraryReq(destination=Bengaluru, Karnataka, India, startDate=2025-11-26, endDate=2025-11-29 (truncated)...]
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Creating itinerary
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Request: CreateItineraryReq(destination=Bengaluru, Karnataka, India, startDate=2025-11-26, endDate=2025-11-29, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=luxury, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY REQUEST ===
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService - Request Details:
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   Destination: Bengaluru, Karnataka, India
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   Start Date: 2025-11-26
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   End Date: 2025-11-29
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   Duration: 3 days
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   Budget Tier: luxury
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   Language: en
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   Party: 1 adults, 0 children, 0 infants, 1 rooms
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   Interests: relaxation, nature, cuisine
2025-09-24 17:44:30.334 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService -   Constraints: budgetFriendly
2025-09-24 17:44:30.337 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY RESPONSE ===
2025-09-24 17:44:30.337 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.337 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - === AGENT ORCHESTRATOR: NORMALIZED ITINERARY GENERATION ===
2025-09-24 17:44:30.337 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService - Status: generating
2025-09-24 17:44:30.338 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.338 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Destination: Bengaluru, Karnataka, India
2025-09-24 17:44:30.338 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService - Orchestration started: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.338 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 1: Creating initial itinerary structure
2025-09-24 17:44:30.338 [http-nio-8080-exec-5] INFO  com.tripplanner.service.ItineraryService - =====================================
2025-09-24 17:44:30.338 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.ItinerariesController - Itinerary created successfully: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.340 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:44:30.340 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ItineraryDto(id=it_d8b91616-dccb-4830-adb4-270973d8a446, destination=Bengaluru, Karnataka, India, st (truncated)...]
2025-09-24 17:44:30.341 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:44:30.341 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:44:30.352 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:30.356 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.356 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:30.357 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:30.357 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json", parameters={}
2025-09-24 17:44:30.357 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:44:30.358 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.358 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.358 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_d8b91616-dccb-4830-adb4-270973d8a446", parameters={masked}
2025-09-24 17:44:30.359 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:44:30.359 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:44:30.359 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.359 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Request Time: 17:44:30.359080800
2025-09-24 17:44:30.359 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:44:30.360 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@4dc3dcf
2025-09-24 17:44:30.361 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:44:30.361 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.361 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@4dc3dcf
2025-09-24 17:44:30.361 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_d8b91616-dccb-4830-adb4-270973d8a446: 1
2025-09-24 17:44:30.361 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 1
2025-09-24 17:44:30.361 [http-nio-8080-exec-7] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:44:30.362 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:44:30.362 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:44:30.362 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.362 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:44:30.362 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:44:30.365 [http-nio-8080-exec-7] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:44:30.368 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:44:30.368 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:44:30.689 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 2: Running PlannerAgent
2025-09-24 17:44:30.690 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION START ===
2025-09-24 17:44:30.690 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:44:30.690 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent ID: dbb9b7ca-20fc-4b4e-b496-161bb6fe9a38
2025-09-24 17:44:30.690 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.690 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Type: ItineraryDto
2025-09-24 17:44:30.690 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Data: CreateItineraryReq(destination=Bengaluru, Karnataka, India, startDate=2025-11-26, endDate=2025-11-29, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=luxury, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:44:30.690 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Details: CreateItineraryReq(destination=Bengaluru, Karnataka, India, startDate=2025-11-26, endDate=2025-11-29, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=luxury, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:44:30.690 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: dbb9b7ca-20fc-4b4e-b496-161bb6fe9a38
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: queued
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent queued for execution
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:44:30.691 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:14:30.691560300Z
2025-09-24 17:44:30.696 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: dbb9b7ca-20fc-4b4e-b496-161bb6fe9a38
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent started
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:14:30.697068700Z
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Executing agent-specific logic for: planner
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROCESSING ===
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Destination: Bengaluru, Karnataka, India
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Start Date: 2025-11-26
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - End Date: 2025-11-29
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Duration: 3 days
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Party: 1 adults
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Budget Tier: luxury
2025-09-24 17:44:30.697 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Interests: [relaxation, nature, cuisine]
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Constraints: [budgetFriendly]
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Language: en
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =================================
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: dbb9b7ca-20fc-4b4e-b496-161bb6fe9a38
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 10
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Analyzing trip requirements
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: requirement_analysis
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:14:30.698069500Z
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: dbb9b7ca-20fc-4b4e-b496-161bb6fe9a38
2025-09-24 17:44:30.698 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:44:30.699 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:44:30.699 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 30
2025-09-24 17:44:30.699 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Generating itinerary structure
2025-09-24 17:44:30.699 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: structure_generation
2025-09-24 17:44:30.699 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:14:30.698069500Z
2025-09-24 17:44:30.699 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.699 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:44:30.700 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROMPTS ===
2025-09-24 17:44:30.701 [task-1] INFO  com.tripplanner.agents.PlannerAgent - System Prompt Length: 1488 chars
2025-09-24 17:44:30.701 [task-1] INFO  com.tripplanner.agents.PlannerAgent - User Prompt: Create a detailed normalized itinerary for the following trip:

Itinerary ID: 560508726_1758716070699
Destination: Bengaluru, Karnataka, India
Start Date: 2025-11-26
End Date: 2025-11-29
Duration: 3 days
Party: 1 adults
Budget Tier: luxury
Language: en
Interests: relaxation, nature, cuisine
Constraints: budgetFriendly
Themes: relaxation, nature, cuisine
Currency: INR

IMPORTANT: Create a comprehensive normalized itinerary with nodes and edges that maximizes the travel experience while staying within the specified parameters.
You MUST populate ALL 3 days with meaningful activities, meals, and transportation.
Each day should have at least 3-5 nodes including attractions, meals, and transport as appropriate.
Do NOT leave any days with empty nodes arrays.
2025-09-24 17:44:30.701 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:44:30.701 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:44:30.701 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.701 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: dbb9b7ca-20fc-4b4e-b496-161bb6fe9a38
2025-09-24 17:44:30.701 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:44:30.702 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:44:30.702 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 50
2025-09-24 17:44:30.702 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Processing with AI model
2025-09-24 17:44:30.702 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: ai_processing
2025-09-24 17:44:30.702 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:14:30.701068600Z
2025-09-24 17:44:30.702 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:30.702 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:44:31.804 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:31.805 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:44:31.805 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_d8b91616-dccb-4830-adb4-270973d8a446', version=1, summary='Your  (truncated)...]
2025-09-24 17:44:31.806 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:44:31.807 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:44:31.880 [task-1] ERROR c.tripplanner.service.openrouter.OpenRouterClient - OpenRouter API error: 404 - {"error":{"message":"No endpoints found for qwen/qwen-2.5-7b-instruct:free.","code":404},"user_id":"user_2ydTb8uNwio9RCMr5Sjkde2npgT"}
2025-09-24 17:44:31.880 [task-1] ERROR c.tripplanner.service.openrouter.OpenRouterClient - Failed to generate structured content via OpenRouter
java.lang.RuntimeException: OpenRouter API error: 404
	at com.tripplanner.service.openrouter.OpenRouterClient.generateStructuredContent(OpenRouterClient.java:145)
	at com.tripplanner.agents.PlannerAgent.executeInternal(PlannerAgent.java:80)
	at com.tripplanner.agents.BaseAgent.execute(BaseAgent.java:52)
	at com.tripplanner.agents.AgentOrchestrator.generateNormalizedItinerary(AgentOrchestrator.java:96)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:74)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-24 17:44:31.882 [task-1] ERROR com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION FAILED ===
2025-09-24 17:44:31.882 [task-1] ERROR com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:44:31.882 [task-1] ERROR com.tripplanner.agents.PlannerAgent - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:31.882 [task-1] ERROR com.tripplanner.agents.PlannerAgent - Error: Failed to generate structured content via OpenRouter: OpenRouter API error: 404
java.lang.RuntimeException: Failed to generate structured content via OpenRouter: OpenRouter API error: 404
	at com.tripplanner.service.openrouter.OpenRouterClient.generateStructuredContent(OpenRouterClient.java:159)
	at com.tripplanner.agents.PlannerAgent.executeInternal(PlannerAgent.java:80)
	at com.tripplanner.agents.BaseAgent.execute(BaseAgent.java:52)
	at com.tripplanner.agents.AgentOrchestrator.generateNormalizedItinerary(AgentOrchestrator.java:96)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:74)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: OpenRouter API error: 404
	at com.tripplanner.service.openrouter.OpenRouterClient.generateStructuredContent(OpenRouterClient.java:145)
	... 16 common frames omitted
2025-09-24 17:44:31.882 [task-1] ERROR com.tripplanner.agents.PlannerAgent - ==============================
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: dbb9b7ca-20fc-4b4e-b496-161bb6fe9a38
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: failed
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent failed: Failed to generate structured content via OpenRouter: OpenRouter API error: 404
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:44:31.882 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:14:31.882430600Z
2025-09-24 17:44:31.883 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:31.883 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:44:31.883 [task-1] ERROR com.tripplanner.agents.AgentOrchestrator - Failed to generate normalized itinerary for ID: it_d8b91616-dccb-4830-adb4-270973d8a446
java.lang.RuntimeException: Agent execution failed: Failed to generate structured content via OpenRouter: OpenRouter API error: 404
	at com.tripplanner.agents.BaseAgent.execute(BaseAgent.java:77)
	at com.tripplanner.agents.AgentOrchestrator.generateNormalizedItinerary(AgentOrchestrator.java:96)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:74)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: Failed to generate structured content via OpenRouter: OpenRouter API error: 404
	at com.tripplanner.service.openrouter.OpenRouterClient.generateStructuredContent(OpenRouterClient.java:159)
	at com.tripplanner.agents.PlannerAgent.executeInternal(PlannerAgent.java:80)
	at com.tripplanner.agents.BaseAgent.execute(BaseAgent.java:52)
	... 14 common frames omitted
Caused by: java.lang.RuntimeException: OpenRouter API error: 404
	at com.tripplanner.service.openrouter.OpenRouterClient.generateStructuredContent(OpenRouterClient.java:145)
	... 16 common frames omitted
2025-09-24 17:44:35.355 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:35.355 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:35.355 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json", parameters={}
2025-09-24 17:44:35.355 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:44:35.355 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:35.687 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:35.687 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:44:35.687 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_d8b91616-dccb-4830-adb4-270973d8a446', version=1, summary='Your  (truncated)...]
2025-09-24 17:44:35.688 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:44:35.688 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:44:35.701 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:35.701 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:35.701 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json", parameters={}
2025-09-24 17:44:35.703 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:44:35.703 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:36.836 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:36.836 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:44:36.836 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_d8b91616-dccb-4830-adb4-270973d8a446', version=1, summary='Your  (truncated)...]
2025-09-24 17:44:36.837 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:44:36.837 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:44:36.839 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:36.839 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:44:36.839 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json", parameters={}
2025-09-24 17:44:36.839 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:44:36.839 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:37.171 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:44:37.171 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:44:37.171 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_d8b91616-dccb-4830-adb4-270973d8a446', version=1, summary='Your  (truncated)...]
2025-09-24 17:44:37.172 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:44:37.172 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:51:23.222 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-24 17:51:25.185 [main] INFO  com.tripplanner.App - Starting App using Java 17.0.12 with PID 29836 (C:\Users\user\IdeaProjects\AgenticItineraryPlanner\build\classes\java\main started by user in C:\Users\user\IdeaProjects\AgenticItineraryPlanner)
2025-09-24 17:51:25.187 [main] INFO  com.tripplanner.App - No active profile set, falling back to 1 default profile: "default"
2025-09-24 17:51:25.819 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-24 17:51:25.826 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 17:51:25.826 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-24 17:51:25.861 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 17:51:25.861 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 650 ms
2025-09-24 17:51:25.889 [main] DEBUG o.springframework.web.filter.ForwardedHeaderFilter - Filter 'forwardedHeaderFilter' configured for use
2025-09-24 17:51:25.980 [main] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: qwen/qwen-2.5-72b-instruct:free
2025-09-24 17:51:25.983 [main] INFO  c.tripplanner.service.openrouter.OpenRouterClient - Initialized OpenRouter client with model: qwen/qwen-2.5-72b-instruct:free
2025-09-24 17:51:26.126 [main] INFO  com.tripplanner.config.FirestoreConfig - Configured Firestore credentials from tripplanner-bdd3c-firebase-adminsdk-fbsvc-633254ef65.json
2025-09-24 17:51:26.398 [main] INFO  com.tripplanner.config.FirestoreConfig - Firestore initialized for project: tripplanner-bdd3c (emulator: false)
2025-09-24 17:51:26.431 [main] INFO  com.tripplanner.service.GeminiClient - Initializing Gemini client with model: gemini-1.5-pro
2025-09-24 17:51:26.432 [main] INFO  com.tripplanner.service.GeminiClient - Gemini client initialized successfully
2025-09-24 17:51:26.518 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 29 mappings in 'requestMappingHandlerMapping'
2025-09-24 17:51:26.536 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-24 17:51:26.549 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-24 17:51:26.589 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-24 17:51:26.627 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-24 17:51:26.653 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-24 17:51:26.732 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-24 17:51:26.736 [main] INFO  com.tripplanner.App - Started App in 1.835 seconds (process running for 2.179)
2025-09-24 17:51:33.683 [http-nio-8080-exec-4] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 17:51:33.683 [http-nio-8080-exec-4] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 17:51:33.683 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-24 17:51:33.683 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-24 17:51:33.683 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-24 17:51:33.684 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@67593f7b
2025-09-24 17:51:33.684 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@40a7974
2025-09-24 17:51:33.684 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-24 17:51:33.684 [http-nio-8080-exec-4] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-24 17:51:33.697 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:51:33.697 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:51:33.710 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json
2025-09-24 17:51:33.710 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:51:33.712 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_d8b91616-dccb-4830-adb4-270973d8a446/json", parameters={}
2025-09-24 17:51:33.712 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_d8b91616-dccb-4830-adb4-270973d8a446", parameters={masked}
2025-09-24 17:51:33.713 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:51:33.713 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:51:33.723 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:51:33.723 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:51:33.724 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:51:33.724 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - Request Time: 17:51:33.724705400
2025-09-24 17:51:33.724 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:51:33.725 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@4f149c52
2025-09-24 17:51:33.725 [http-nio-8080-exec-4] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:51:33.725 [http-nio-8080-exec-4] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:51:33.725 [http-nio-8080-exec-4] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@4f149c52
2025-09-24 17:51:33.725 [http-nio-8080-exec-4] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_d8b91616-dccb-4830-adb4-270973d8a446: 1
2025-09-24 17:51:33.725 [http-nio-8080-exec-4] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 1
2025-09-24 17:51:33.725 [http-nio-8080-exec-4] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:51:33.726 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:51:33.726 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:51:33.726 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:51:33.726 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:51:33.726 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:51:33.729 [http-nio-8080-exec-4] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:51:33.734 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:51:33.734 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:51:34.594 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_d8b91616-dccb-4830-adb4-270973d8a446
2025-09-24 17:51:34.603 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:51:34.605 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_d8b91616-dccb-4830-adb4-270973d8a446', version=1, summary='Your  (truncated)...]
2025-09-24 17:51:34.612 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:51:34.612 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:03.276 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/itineraries
2025-09-24 17:52:03.277 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/itineraries
2025-09-24 17:52:03.277 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/itineraries", parameters={}
2025-09-24 17:52:03.277 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#create(CreateItineraryReq)
2025-09-24 17:52:03.291 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateItineraryReq(destination=Bengaluru, Karnataka, India, startDate=2025-12-24, endDate=2025-12-27 (truncated)...]
2025-09-24 17:52:03.313 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Creating itinerary
2025-09-24 17:52:03.313 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Request: CreateItineraryReq(destination=Bengaluru, Karnataka, India, startDate=2025-12-24, endDate=2025-12-27, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY REQUEST ===
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - Request Details:
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   Destination: Bengaluru, Karnataka, India
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   Start Date: 2025-12-24
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   End Date: 2025-12-27
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   Duration: 3 days
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   Budget Tier: mid-range
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   Language: en
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   Party: 1 adults, 0 children, 0 infants, 1 rooms
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   Interests: relaxation, nature, cuisine
2025-09-24 17:52:03.314 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService -   Constraints: budgetFriendly
2025-09-24 17:52:03.317 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - === AGENT ORCHESTRATOR: NORMALIZED ITINERARY GENERATION ===
2025-09-24 17:52:03.317 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.317 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Destination: Bengaluru, Karnataka, India
2025-09-24 17:52:03.317 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 1: Creating initial itinerary structure
2025-09-24 17:52:03.319 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - === CREATE ITINERARY RESPONSE ===
2025-09-24 17:52:03.319 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.319 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - Status: generating
2025-09-24 17:52:03.319 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - Orchestration started: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.319 [http-nio-8080-exec-6] INFO  com.tripplanner.service.ItineraryService - =====================================
2025-09-24 17:52:03.319 [http-nio-8080-exec-6] INFO  com.tripplanner.controller.ItinerariesController - Itinerary created successfully: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.323 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:52:03.327 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ItineraryDto(id=it_c8666517-6111-4685-9123-7437d46a2600, destination=Bengaluru, Karnataka, India, st (truncated)...]
2025-09-24 17:52:03.328 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:52:03.329 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:03.341 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing OPTIONS /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:03.342 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.343 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.343 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/agents/stream?itineraryId=it_c8666517-6111-4685-9123-7437d46a2600", parameters={masked}
2025-09-24 17:52:03.343 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.AgentController#stream(String)
2025-09-24 17:52:03.343 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - === SSE STREAM REQUEST ===
2025-09-24 17:52:03.343 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Request Time: 17:52:03.344053
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Client requesting SSE connection
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Created SSE emitter: SseEmitter@7b1023ac
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - === SSE EMITTER REGISTRATION ===
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - Emitter: SseEmitter@7b1023ac
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - Total emitters for itinerary it_c8666517-6111-4685-9123-7437d46a2600: 1
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - Total active itineraries: 2
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.service.AgentEventBus - ===============================
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Initial SSE connection event sent successfully
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - === SSE STREAM ESTABLISHED ===
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - Emitter registered and ready
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] INFO  com.tripplanner.controller.AgentController - =============================
2025-09-24 17:52:03.344 [http-nio-8080-exec-5] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/api/v1/agents/stream"
2025-09-24 17:52:03.344 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:03.345 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-09-24 17:52:03.345 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:03.345 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:03.345 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json", parameters={}
2025-09-24 17:52:03.345 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:52:03.346 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.662 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 2: Running PlannerAgent
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION START ===
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Type: ItineraryDto
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Data: CreateItineraryReq(destination=Bengaluru, Karnataka, India, startDate=2025-12-24, endDate=2025-12-27, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Request Details: CreateItineraryReq(destination=Bengaluru, Karnataka, India, startDate=2025-12-24, endDate=2025-12-27, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en)
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: queued
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent queued for execution
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:52:03.663 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:22:03.663711300Z
2025-09-24 17:52:03.668 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.668 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:52:03.668 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:52:03.668 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.668 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:52:03.668 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:52:03.668 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:52:03.668 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:52:03.669 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent started
2025-09-24 17:52:03.669 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:52:03.669 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:22:03.668220200Z
2025-09-24 17:52:03.669 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.669 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:52:03.669 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Executing agent-specific logic for: planner
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROCESSING ===
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Destination: Bengaluru, Karnataka, India
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Start Date: 2025-12-24
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - End Date: 2025-12-27
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Duration: 3 days
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Party: 1 adults
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Budget Tier: mid-range
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Interests: [relaxation, nature, cuisine]
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Constraints: [budgetFriendly]
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Language: en
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =================================
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 10
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Analyzing trip requirements
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: requirement_analysis
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:22:03.670225600Z
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 30
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Generating itinerary structure
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: structure_generation
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:22:03.670225600Z
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.670 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT PROMPTS ===
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.agents.PlannerAgent - System Prompt Length: 1488 chars
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.agents.PlannerAgent - User Prompt: Create a detailed normalized itinerary for the following trip:

Itinerary ID: 560508726_1758716523670
Destination: Bengaluru, Karnataka, India
Start Date: 2025-12-24
End Date: 2025-12-27
Duration: 3 days
Party: 1 adults
Budget Tier: mid-range
Language: en
Interests: relaxation, nature, cuisine
Constraints: budgetFriendly
Themes: relaxation, nature, cuisine
Currency: INR

IMPORTANT: Create a comprehensive normalized itinerary with nodes and edges that maximizes the travel experience while staying within the specified parameters.
You MUST populate ALL 3 days with meaningful activities, meals, and transportation.
Each day should have at least 3-5 nodes including attractions, meals, and transport as appropriate.
Do NOT leave any days with empty nodes arrays.
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =============================
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 50
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Processing with AI model
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: ai_processing
2025-09-24 17:52:03.672 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:22:03.672226400Z
2025-09-24 17:52:03.673 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 1 emitters successfully, 0 failed for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:03.673 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:52:04.803 [http-nio-8080-exec-3] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:04.804 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:52:04.804 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_c8666517-6111-4685-9123-7437d46a2600', version=1, summary='Your  (truncated)...]
2025-09-24 17:52:04.805 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:52:04.805 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:08.342 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:08.343 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:08.343 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json", parameters={}
2025-09-24 17:52:08.343 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:52:08.343 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:08.680 [http-nio-8080-exec-7] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:08.680 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:52:08.680 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_c8666517-6111-4685-9123-7437d46a2600', version=1, summary='Your  (truncated)...]
2025-09-24 17:52:08.681 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:52:08.681 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:08.693 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:08.694 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:08.694 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json", parameters={}
2025-09-24 17:52:08.694 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:52:08.694 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:09.804 [http-nio-8080-exec-8] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:09.805 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:52:09.805 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_c8666517-6111-4685-9123-7437d46a2600', version=1, summary='Your  (truncated)...]
2025-09-24 17:52:09.805 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:52:09.805 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:09.807 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:09.807 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:09.807 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json", parameters={}
2025-09-24 17:52:09.807 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:52:09.807 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:10.156 [http-nio-8080-exec-9] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:10.157 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:52:10.157 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_c8666517-6111-4685-9123-7437d46a2600', version=1, summary='Your  (truncated)...]
2025-09-24 17:52:10.157 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:52:10.158 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:26.477 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries
2025-09-24 17:52:26.477 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries
2025-09-24 17:52:26.477 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries", parameters={}
2025-09-24 17:52:26.477 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getAll()
2025-09-24 17:52:26.478 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Getting all itineraries
2025-09-24 17:52:26.805 [http-nio-8080-exec-10] INFO  com.tripplanner.controller.ItinerariesController - Found 2 itineraries
2025-09-24 17:52:26.808 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:52:26.808 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [[ItineraryDto(id=it_c8666517-6111-4685-9123-7437d46a2600, destination=Bengaluru, Karnataka, India, s (truncated)...]
2025-09-24 17:52:26.809 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:52:26.809 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:29.027 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:29.027 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:29.027 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json", parameters={}
2025-09-24 17:52:29.028 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:52:29.028 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:29.332 [http-nio-8080-exec-4] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:29.333 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:52:29.333 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_c8666517-6111-4685-9123-7437d46a2600', version=1, summary='Your  (truncated)...]
2025-09-24 17:52:29.334 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:52:29.334 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:52:29.335 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:29.335 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json
2025-09-24 17:52:29.335 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/api/v1/itineraries/it_c8666517-6111-4685-9123-7437d46a2600/json", parameters={}
2025-09-24 17:52:29.336 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tripplanner.controller.ItinerariesController#getItineraryJson(String)
2025-09-24 17:52:29.336 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Getting normalized itinerary JSON: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:30.496 [http-nio-8080-exec-1] INFO  com.tripplanner.controller.ItinerariesController - Normalized itinerary found: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:52:30.496 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-24 17:52:30.496 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [NormalizedItinerary{itineraryId='it_c8666517-6111-4685-9123-7437d46a2600', version=1, summary='Your  (truncated)...]
2025-09-24 17:52:30.497 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-24 17:52:30.497 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT RESPONSE ===
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Using JSON file response
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Response Length: 21690 chars
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Response Preview: {
  "itineraryId": "560508726_1758716523670",
  "version": 1,
  "summary": "A 3-day itinerary in Bengaluru, focusing on relaxation, nature, and cuisine. Enjoy local parks, serene temples, and a variet...
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.agents.PlannerAgent - ===============================
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 80
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Parsing generated itinerary
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: parsing
2025-09-24 17:53:10.483 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:10.483962Z
2025-09-24 17:53:10.484 [task-1] WARN  com.tripplanner.service.AgentEventBus - Failed to send event to SSE emitter for itinerary: it_c8666517-6111-4685-9123-7437d46a2600 (client likely disconnected)
2025-09-24 17:53:10.484 [task-1] INFO  com.tripplanner.service.AgentEventBus - Event sent to 0 emitters successfully, 1 failed for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.484 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:10.484 [http-nio-8080-exec-6] DEBUG o.s.web.context.request.async.WebAsyncManager - Servlet container error notification for "/api/v1/agents/stream"
2025-09-24 17:53:10.484 [http-nio-8080-exec-6] WARN  com.tripplanner.controller.AgentController - SSE stream ended for itinerary it_c8666517-6111-4685-9123-7437d46a2600 due to: java.io.IOException: An established connection was aborted by the software in your host machine
2025-09-24 17:53:10.484 [http-nio-8080-exec-6] DEBUG o.s.web.context.request.async.WebAsyncManager - Async result set for "/api/v1/agents/stream"
2025-09-24 17:53:10.484 [http-nio-8080-exec-6] DEBUG o.s.web.context.request.async.WebAsyncManager - Performing async dispatch for "/api/v1/agents/stream"
2025-09-24 17:53:10.488 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /api/v1/agents/stream?itineraryId=it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.488 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /api/v1/agents/stream?itineraryId=it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.488 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - "ASYNC" dispatch for GET "/api/v1/agents/stream?itineraryId=it_c8666517-6111-4685-9123-7437d46a2600", parameters={masked}
2025-09-24 17:53:10.489 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Resume with async result [java.io.IOException: An established connection was aborted by the software in your host machine]
2025-09-24 17:53:10.489 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT RESULT ===
2025-09-24 17:53:10.489 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Parsed Response Type: NormalizedItinerary
2025-09-24 17:53:10.489 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.489 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Days Generated: 3
2025-09-24 17:53:10.492 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.tripplanner.controller.GlobalExceptionHandler#handleIOException(IOException, WebRequest)
2025-09-24 17:53:10.493 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Found 'Content-Type:text/event-stream' in response
2025-09-24 17:53:10.493 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.io.IOException: An established connection was aborted by the software in your host machine]
2025-09-24 17:53:10.494 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ASYNC" dispatch, status 200
2025-09-24 17:53:10.494 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 17:53:10.489 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Result: NormalizedItinerary{itineraryId='it_c8666517-6111-4685-9123-7437d46a2600', version=1, summary='A 3-day itinerary in Bengaluru, focusing on relaxation, nature, and cuisine. Enjoy local parks, serene temples, and a variety of culinary experiences.', currency='INR', themes=[relaxation, nature, cuisine], days=[NormalizedDay{dayNumber=1, date=2025-12-24, location='Bengaluru, Karnataka, India', pacing=null, warnings=null, notes='null', totals=null, timeWindow=null, nodes=[NormalizedNode{id='n1', type='transport', title='Arrival at Kempegowda International Airport', location=NodeLocation{name='Kempegowda International Airport', address='Airport Road, Devanahalli, Bengaluru, Karnataka 562106', coordinates=Coordinates{lat=13.2167, lng=77.6903}}, timing=NodeTiming{startTime=2025-12-24T09:00:00Z, endTime=2025-12-24T09:30:00Z, durationMin=30}, cost=NodeCost{amount=500.0, currency='INR', per='one-way'}, details=NodeDetails{rating=null, category='null', tags=null, openingHours=null}, labels=[], tips=NodeTips{travel=[Use prepaid taxi or app-based services for a hassle-free ride.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.487962400Z}, NormalizedNode{id='n2', type='transport', title='Taxi to Hotel', location=NodeLocation{name='Hotel', address='Hotel Address, Bengaluru', coordinates=Coordinates{lat=12.9716, lng=77.5946}}, timing=NodeTiming{startTime=2025-12-24T10:00:00Z, endTime=2025-12-24T10:30:00Z, durationMin=30}, cost=NodeCost{amount=500.0, currency='INR', per='one-way'}, details=NodeDetails{rating=null, category='null', tags=null, openingHours=null}, labels=[], tips=NodeTips{travel=[Pre-book a taxi or use a ride-hailing app for convenience.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.488960900Z}, NormalizedNode{id='n3', type='accommodation', title='Check-in at Hotel', location=NodeLocation{name='Hotel', address='Hotel Address, Bengaluru', coordinates=Coordinates{lat=12.9716, lng=77.5946}}, timing=NodeTiming{startTime=2025-12-24T11:00:00Z, endTime=2025-12-24T12:00:00Z, durationMin=60}, cost=NodeCost{amount=3000.0, currency='INR', per='night'}, details=NodeDetails{rating=4.5, category='Mid-range', tags=[clean, comfortable, central], openingHours=null}, labels=[], tips=NodeTips{travel=[], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.488960900Z}, NormalizedNode{id='n4', type='meal', title='Lunch at Mavalli Tiffin Room (MTR)', location=NodeLocation{name='Mavalli Tiffin Room (MTR)', address='198, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011', coordinates=Coordinates{lat=12.9654, lng=77.5842}}, timing=NodeTiming{startTime=2025-12-24T13:00:00Z, endTime=2025-12-24T14:00:00Z, durationMin=60}, cost=NodeCost{amount=250.0, currency='INR', per='person'}, details=NodeDetails{rating=4.8, category='South Indian', tags=[vegan, traditional, affordable], openingHours=null}, labels=[], tips=NodeTips{travel=[Near the hotel, easy to walk.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.488960900Z}, NormalizedNode{id='n5', type='attraction', title='Visit Cubbon Park', location=NodeLocation{name='Cubbon Park', address='Cubbon Park, Sampangi Rama Nagar, Bengaluru, Karnataka 560001', coordinates=Coordinates{lat=12.9852, lng=77.5968}}, timing=NodeTiming{startTime=2025-12-24T15:00:00Z, endTime=2025-12-24T17:00:00Z, durationMin=120}, cost=NodeCost{amount=50.0, currency='INR', per='entry'}, details=NodeDetails{rating=4.7, category='Park', tags=[green, serene, walk], openingHours=null}, labels=[], tips=NodeTips{travel=[Take an auto-rickshaw or walk if close.], warnings=[Avoid weekends for a more peaceful experience.]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.488960900Z}], edges=[Edge{from='n1', to='n2'}, Edge{from='n2', to='n3'}, Edge{from='n3', to='n4'}, Edge{from='n4', to='n5'}]}, NormalizedDay{dayNumber=2, date=2025-12-25, location='Bengaluru, Karnataka, India', pacing=null, warnings=null, notes='null', totals=null, timeWindow=null, nodes=[NormalizedNode{id='n6', type='meal', title='Breakfast at Vidyarthi Bhavan', location=NodeLocation{name='Vidyarthi Bhavan', address='120, MG Road, Bangalore, Karnataka 560001', coordinates=Coordinates{lat=12.9845, lng=77.6012}}, timing=NodeTiming{startTime=2025-12-25T08:00:00Z, endTime=2025-12-25T09:00:00Z, durationMin=60}, cost=NodeCost{amount=200.0, currency='INR', per='person'}, details=NodeDetails{rating=4.6, category='South Indian', tags=[traditional, veg, affordable], openingHours=null}, labels=[], tips=NodeTips{travel=[Take an auto-rickshaw or walk if close.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.488960900Z}, NormalizedNode{id='n7', type='attraction', title='Visit Lalbagh Botanical Garden', location=NodeLocation{name='Lalbagh Botanical Garden', address='Lal Bagh Road, Lalbagh, Bengaluru, Karnataka 560027', coordinates=Coordinates{lat=12.9385, lng=77.5811}}, timing=NodeTiming{startTime=2025-12-25T10:00:00Z, endTime=2025-12-25T12:00:00Z, durationMin=120}, cost=NodeCost{amount=60.0, currency='INR', per='entry'}, details=NodeDetails{rating=4.5, category='Botanical Garden', tags=[green, serene, flowers], openingHours=null}, labels=[], tips=NodeTips{travel=[Take a bus or auto-rickshaw.], warnings=[Wear comfortable shoes and bring water.]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.488960900Z}, NormalizedNode{id='n8', type='meal', title='Lunch at Truffles', location=NodeLocation{name='Truffles', address='51, 1st Main Road, Indiranagar, Bengaluru, Karnataka 560038', coordinates=Coordinates{lat=12.9742, lng=77.6286}}, timing=NodeTiming{startTime=2025-12-25T13:00:00Z, endTime=2025-12-25T14:30:00Z, durationMin=90}, cost=NodeCost{amount=500.0, currency='INR', per='person'}, details=NodeDetails{rating=4.4, category='Contemporary', tags=[veg, non-veg, affordable], openingHours=null}, labels=[], tips=NodeTips{travel=[Take an auto-rickshaw or taxi.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.489961Z}, NormalizedNode{id='n9', type='attraction', title='Visit Nandi Hills', location=NodeLocation{name='Nandi Hills', address='Nandi Hills, Chikkaballapur, Karnataka 561201', coordinates=Coordinates{lat=13.3545, lng=77.7578}}, timing=NodeTiming{startTime=2025-12-25T15:30:00Z, endTime=2025-12-25T18:00:00Z, durationMin=150}, cost=NodeCost{amount=100.0, currency='INR', per='entry'}, details=NodeDetails{rating=4.6, category='Hill Station', tags=[scenic, relaxing, nature], openingHours=null}, labels=[], tips=NodeTips{travel=[Book a taxi for a round trip.], warnings=[Wear comfortable shoes and bring a jacket.]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.489961Z}, NormalizedNode{id='n10', type='meal', title='Dinner at Saravana Bhavan', location=NodeLocation{name='Saravana Bhavan', address='11, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011', coordinates=Coordinates{lat=12.9647, lng=77.5838}}, timing=NodeTiming{startTime=2025-12-25T20:00:00Z, endTime=2025-12-25T21:30:00Z, durationMin=90}, cost=NodeCost{amount=300.0, currency='INR', per='person'}, details=NodeDetails{rating=4.7, category='South Indian', tags=[veg, traditional, affordable], openingHours=null}, labels=[], tips=NodeTips{travel=[Take a taxi back to the hotel.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.489961Z}], edges=[Edge{from='n6', to='n7'}, Edge{from='n7', to='n8'}, Edge{from='n8', to='n9'}, Edge{from='n9', to='n10'}]}, NormalizedDay{dayNumber=3, date=2025-12-26, location='Bengaluru, Karnataka, India', pacing=null, warnings=null, notes='null', totals=null, timeWindow=null, nodes=[NormalizedNode{id='n11', type='meal', title='Breakfast at Hotel Janatha', location=NodeLocation{name='Hotel Janatha', address='114, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011', coordinates=Coordinates{lat=12.9647, lng=77.5838}}, timing=NodeTiming{startTime=2025-12-26T08:00:00Z, endTime=2025-12-26T09:00:00Z, durationMin=60}, cost=NodeCost{amount=150.0, currency='INR', per='person'}, details=NodeDetails{rating=4.5, category='South Indian', tags=[veg, traditional, affordable], openingHours=null}, labels=[], tips=NodeTips{travel=[Take an auto-rickshaw or walk if close.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.489961Z}, NormalizedNode{id='n12', type='attraction', title='Visit Bannerghatta National Park', location=NodeLocation{name='Bannerghatta National Park', address='Bannerghatta Road, Bannerghatta, Bengaluru, Karnataka 560083', coordinates=Coordinates{lat=12.8738, lng=77.5783}}, timing=NodeTiming{startTime=2025-12-26T10:00:00Z, endTime=2025-12-26T13:00:00Z, durationMin=180}, cost=NodeCost{amount=150.0, currency='INR', per='entry'}, details=NodeDetails{rating=4.5, category='National Park', tags=[wildlife, nature, scenic], openingHours=null}, labels=[], tips=NodeTips{travel=[Book a taxi for a round trip.], warnings=[Wear comfortable shoes and bring water.]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.489961Z}, NormalizedNode{id='n13', type='meal', title='Lunch at The Pecos', location=NodeLocation{name='The Pecos', address='11, 100 Feet Road, Indiranagar, Bengaluru, Karnataka 560038', coordinates=Coordinates{lat=12.9742, lng=77.6286}}, timing=NodeTiming{startTime=2025-12-26T14:00:00Z, endTime=2025-12-26T15:30:00Z, durationMin=90}, cost=NodeCost{amount=400.0, currency='INR', per='person'}, details=NodeDetails{rating=4.3, category='American', tags=[non-veg, affordable, casual], openingHours=null}, labels=[], tips=NodeTips{travel=[Take a taxi back to the hotel.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.489961Z}, NormalizedNode{id='n14', type='attraction', title='Visit ISKCON Temple', location=NodeLocation{name='ISKCON Temple', address='Hare Krishna Hill, Chord Road, Rajajinagar, Bengaluru, Karnataka 560010', coordinates=Coordinates{lat=13.0394, lng=77.5488}}, timing=NodeTiming{startTime=2025-12-26T16:30:00Z, endTime=2025-12-26T18:30:00Z, durationMin=120}, cost=NodeCost{amount=50.0, currency='INR', per='entry'}, details=NodeDetails{rating=4.7, category='Temple', tags=[serene, spiritual, cultural], openingHours=null}, labels=[], tips=NodeTips{travel=[Take a taxi or bus.], warnings=[Wear appropriate clothing for the temple.]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.489961Z}, NormalizedNode{id='n15', type='meal', title='Dinner at Hoopla', location=NodeLocation{name='Hoopla', address='25, 100 Feet Road, Indiranagar, Bengaluru, Karnataka 560038', coordinates=Coordinates{lat=12.9742, lng=77.6286}}, timing=NodeTiming{startTime=2025-12-26T20:00:00Z, endTime=2025-12-26T21:30:00Z, durationMin=90}, cost=NodeCost{amount=500.0, currency='INR', per='person'}, details=NodeDetails{rating=4.4, category='Contemporary', tags=[veg, non-veg, affordable], openingHours=null}, labels=[], tips=NodeTips{travel=[Take a taxi back to the hotel.], warnings=[]}, links=NodeLinks{book='null', details='null'}, transit=null, locked=false, bookingRef='', status='planned', updatedBy='null', updatedAt=2025-09-24T12:23:10.489961Z}], edges=[Edge{from='n11', to='n12'}, Edge{from='n12', to='n13'}, Edge{from='n13', to='n14'}, Edge{from='n14', to='n15'}]}], settings=null, agents=null}
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.agents.PlannerAgent - ============================
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 90
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Finalizing itinerary
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: finalization
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:10.496478400Z
2025-09-24 17:53:10.496 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.496 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:10.908 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === CONVERTING NORMALIZED TO ITINERARY DTO ===
2025-09-24 17:53:10.908 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.908 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Summary: A 3-day itinerary in Bengaluru, focusing on relaxation, nature, and cuisine. Enjoy local parks, serene temples, and a variety of culinary experiences.
2025-09-24 17:53:10.909 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Days count: 3
2025-09-24 17:53:10.909 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === NORMALIZED CONVERSION COMPLETED ===
2025-09-24 17:53:10.911 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Generated itinerary with 3 days
2025-09-24 17:53:10.911 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.911 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === PLANNER AGENT FINAL RESULT ===
2025-09-24 17:53:10.911 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Converted to ItineraryDto: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.911 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Final Result: ItineraryDto(id=it_c8666517-6111-4685-9123-7437d46a2600, destination=Bengaluru, Karnataka, India, startDate=2025-12-24, endDate=2025-12-27, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en, summary=A 3-day itinerary in Bengaluru, focusing on relaxation, nature, and cuisine. Enjoy local parks, serene temples, and a variety of culinary experiences., map=null, days=[ItineraryDayDto(day=1, date=2025-12-24, location=Bengaluru, Karnataka, India, activities=[ActivityDto[name=Arrival at Kempegowda International Airport, description=null, location=LocationDto[name=Kempegowda International Airport, address=Airport Road, Devanahalli, Bengaluru, Karnataka 562106, lat=13.2167, lng=77.6903, placeId=], startTime=2025-12-24T09:00:00Z, endTime=2025-12-24T09:30:00Z, duration=30, category=transport, price=PriceDto[amount=500.0, currency=INR, per=one-way], bookingRequired=false, bookingUrl=, tips=Use prepaid taxi or app-based services for a hassle-free ride.], ActivityDto[name=Taxi to Hotel, description=null, location=LocationDto[name=Hotel, address=Hotel Address, Bengaluru, lat=12.9716, lng=77.5946, placeId=], startTime=2025-12-24T10:00:00Z, endTime=2025-12-24T10:30:00Z, duration=30, category=transport, price=PriceDto[amount=500.0, currency=INR, per=one-way], bookingRequired=false, bookingUrl=, tips=Pre-book a taxi or use a ride-hailing app for convenience.], ActivityDto[name=Check-in at Hotel, description=Mid-range, location=LocationDto[name=Hotel, address=Hotel Address, Bengaluru, lat=12.9716, lng=77.5946, placeId=], startTime=2025-12-24T11:00:00Z, endTime=2025-12-24T12:00:00Z, duration=60, category=accommodation, price=PriceDto[amount=3000.0, currency=INR, per=night], bookingRequired=false, bookingUrl=, tips=], ActivityDto[name=Lunch at Mavalli Tiffin Room (MTR), description=South Indian, location=LocationDto[name=Mavalli Tiffin Room (MTR), address=198, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011, lat=12.9654, lng=77.5842, placeId=], startTime=2025-12-24T13:00:00Z, endTime=2025-12-24T14:00:00Z, duration=60, category=meal, price=PriceDto[amount=250.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Near the hotel, easy to walk.], ActivityDto[name=Visit Cubbon Park, description=Park, location=LocationDto[name=Cubbon Park, address=Cubbon Park, Sampangi Rama Nagar, Bengaluru, Karnataka 560001, lat=12.9852, lng=77.5968, placeId=], startTime=2025-12-24T15:00:00Z, endTime=2025-12-24T17:00:00Z, duration=120, category=attraction, price=PriceDto[amount=50.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Take an auto-rickshaw or walk if close.]], accommodation=null, transportation=null, meals=null, notes=null), ItineraryDayDto(day=2, date=2025-12-25, location=Bengaluru, Karnataka, India, activities=[ActivityDto[name=Breakfast at Vidyarthi Bhavan, description=South Indian, location=LocationDto[name=Vidyarthi Bhavan, address=120, MG Road, Bangalore, Karnataka 560001, lat=12.9845, lng=77.6012, placeId=], startTime=2025-12-25T08:00:00Z, endTime=2025-12-25T09:00:00Z, duration=60, category=meal, price=PriceDto[amount=200.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take an auto-rickshaw or walk if close.], ActivityDto[name=Visit Lalbagh Botanical Garden, description=Botanical Garden, location=LocationDto[name=Lalbagh Botanical Garden, address=Lal Bagh Road, Lalbagh, Bengaluru, Karnataka 560027, lat=12.9385, lng=77.5811, placeId=], startTime=2025-12-25T10:00:00Z, endTime=2025-12-25T12:00:00Z, duration=120, category=attraction, price=PriceDto[amount=60.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Take a bus or auto-rickshaw.], ActivityDto[name=Lunch at Truffles, description=Contemporary, location=LocationDto[name=Truffles, address=51, 1st Main Road, Indiranagar, Bengaluru, Karnataka 560038, lat=12.9742, lng=77.6286, placeId=], startTime=2025-12-25T13:00:00Z, endTime=2025-12-25T14:30:00Z, duration=90, category=meal, price=PriceDto[amount=500.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take an auto-rickshaw or taxi.], ActivityDto[name=Visit Nandi Hills, description=Hill Station, location=LocationDto[name=Nandi Hills, address=Nandi Hills, Chikkaballapur, Karnataka 561201, lat=13.3545, lng=77.7578, placeId=], startTime=2025-12-25T15:30:00Z, endTime=2025-12-25T18:00:00Z, duration=150, category=attraction, price=PriceDto[amount=100.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Book a taxi for a round trip.], ActivityDto[name=Dinner at Saravana Bhavan, description=South Indian, location=LocationDto[name=Saravana Bhavan, address=11, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011, lat=12.9647, lng=77.5838, placeId=], startTime=2025-12-25T20:00:00Z, endTime=2025-12-25T21:30:00Z, duration=90, category=meal, price=PriceDto[amount=300.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take a taxi back to the hotel.]], accommodation=null, transportation=null, meals=null, notes=null), ItineraryDayDto(day=3, date=2025-12-26, location=Bengaluru, Karnataka, India, activities=[ActivityDto[name=Breakfast at Hotel Janatha, description=South Indian, location=LocationDto[name=Hotel Janatha, address=114, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011, lat=12.9647, lng=77.5838, placeId=], startTime=2025-12-26T08:00:00Z, endTime=2025-12-26T09:00:00Z, duration=60, category=meal, price=PriceDto[amount=150.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take an auto-rickshaw or walk if close.], ActivityDto[name=Visit Bannerghatta National Park, description=National Park, location=LocationDto[name=Bannerghatta National Park, address=Bannerghatta Road, Bannerghatta, Bengaluru, Karnataka 560083, lat=12.8738, lng=77.5783, placeId=], startTime=2025-12-26T10:00:00Z, endTime=2025-12-26T13:00:00Z, duration=180, category=attraction, price=PriceDto[amount=150.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Book a taxi for a round trip.], ActivityDto[name=Lunch at The Pecos, description=American, location=LocationDto[name=The Pecos, address=11, 100 Feet Road, Indiranagar, Bengaluru, Karnataka 560038, lat=12.9742, lng=77.6286, placeId=], startTime=2025-12-26T14:00:00Z, endTime=2025-12-26T15:30:00Z, duration=90, category=meal, price=PriceDto[amount=400.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take a taxi back to the hotel.], ActivityDto[name=Visit ISKCON Temple, description=Temple, location=LocationDto[name=ISKCON Temple, address=Hare Krishna Hill, Chord Road, Rajajinagar, Bengaluru, Karnataka 560010, lat=13.0394, lng=77.5488, placeId=], startTime=2025-12-26T16:30:00Z, endTime=2025-12-26T18:30:00Z, duration=120, category=attraction, price=PriceDto[amount=50.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Take a taxi or bus.], ActivityDto[name=Dinner at Hoopla, description=Contemporary, location=LocationDto[name=Hoopla, address=25, 100 Feet Road, Indiranagar, Bengaluru, Karnataka 560038, lat=12.9742, lng=77.6286, placeId=], startTime=2025-12-26T20:00:00Z, endTime=2025-12-26T21:30:00Z, duration=90, category=meal, price=PriceDto[amount=500.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take a taxi back to the hotel.]], accommodation=null, transportation=null, meals=null, notes=null)], agentResults={themes=[relaxation, nature, cuisine], currency=INR}, status=completed, createdAt=2025-09-24T12:23:10.909613Z, updatedAt=2025-09-24T12:23:10.909613Z, isPublic=false, shareToken=null)
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.agents.PlannerAgent - ==================================
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 526ed09c-c405-43c8-9e61-db14ece5180f
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: succeeded
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent completed successfully
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:10.916643200Z
2025-09-24 17:53:10.916 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.agents.PlannerAgent - === AGENT EXECUTION COMPLETED ===
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Agent Kind: planner
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.916 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Result Type: ItineraryDto
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.PlannerAgent - Result: ItineraryDto(id=it_c8666517-6111-4685-9123-7437d46a2600, destination=Bengaluru, Karnataka, India, startDate=2025-12-24, endDate=2025-12-27, party=PartyDto(adults=1, children=0, infants=0, rooms=1), budgetTier=mid-range, interests=[relaxation, nature, cuisine], constraints=[budgetFriendly], language=en, summary=A 3-day itinerary in Bengaluru, focusing on relaxation, nature, and cuisine. Enjoy local parks, serene temples, and a variety of culinary experiences., map=null, days=[ItineraryDayDto(day=1, date=2025-12-24, location=Bengaluru, Karnataka, India, activities=[ActivityDto[name=Arrival at Kempegowda International Airport, description=null, location=LocationDto[name=Kempegowda International Airport, address=Airport Road, Devanahalli, Bengaluru, Karnataka 562106, lat=13.2167, lng=77.6903, placeId=], startTime=2025-12-24T09:00:00Z, endTime=2025-12-24T09:30:00Z, duration=30, category=transport, price=PriceDto[amount=500.0, currency=INR, per=one-way], bookingRequired=false, bookingUrl=, tips=Use prepaid taxi or app-based services for a hassle-free ride.], ActivityDto[name=Taxi to Hotel, description=null, location=LocationDto[name=Hotel, address=Hotel Address, Bengaluru, lat=12.9716, lng=77.5946, placeId=], startTime=2025-12-24T10:00:00Z, endTime=2025-12-24T10:30:00Z, duration=30, category=transport, price=PriceDto[amount=500.0, currency=INR, per=one-way], bookingRequired=false, bookingUrl=, tips=Pre-book a taxi or use a ride-hailing app for convenience.], ActivityDto[name=Check-in at Hotel, description=Mid-range, location=LocationDto[name=Hotel, address=Hotel Address, Bengaluru, lat=12.9716, lng=77.5946, placeId=], startTime=2025-12-24T11:00:00Z, endTime=2025-12-24T12:00:00Z, duration=60, category=accommodation, price=PriceDto[amount=3000.0, currency=INR, per=night], bookingRequired=false, bookingUrl=, tips=], ActivityDto[name=Lunch at Mavalli Tiffin Room (MTR), description=South Indian, location=LocationDto[name=Mavalli Tiffin Room (MTR), address=198, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011, lat=12.9654, lng=77.5842, placeId=], startTime=2025-12-24T13:00:00Z, endTime=2025-12-24T14:00:00Z, duration=60, category=meal, price=PriceDto[amount=250.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Near the hotel, easy to walk.], ActivityDto[name=Visit Cubbon Park, description=Park, location=LocationDto[name=Cubbon Park, address=Cubbon Park, Sampangi Rama Nagar, Bengaluru, Karnataka 560001, lat=12.9852, lng=77.5968, placeId=], startTime=2025-12-24T15:00:00Z, endTime=2025-12-24T17:00:00Z, duration=120, category=attraction, price=PriceDto[amount=50.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Take an auto-rickshaw or walk if close.]], accommodation=null, transportation=null, meals=null, notes=null), ItineraryDayDto(day=2, date=2025-12-25, location=Bengaluru, Karnataka, India, activities=[ActivityDto[name=Breakfast at Vidyarthi Bhavan, description=South Indian, location=LocationDto[name=Vidyarthi Bhavan, address=120, MG Road, Bangalore, Karnataka 560001, lat=12.9845, lng=77.6012, placeId=], startTime=2025-12-25T08:00:00Z, endTime=2025-12-25T09:00:00Z, duration=60, category=meal, price=PriceDto[amount=200.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take an auto-rickshaw or walk if close.], ActivityDto[name=Visit Lalbagh Botanical Garden, description=Botanical Garden, location=LocationDto[name=Lalbagh Botanical Garden, address=Lal Bagh Road, Lalbagh, Bengaluru, Karnataka 560027, lat=12.9385, lng=77.5811, placeId=], startTime=2025-12-25T10:00:00Z, endTime=2025-12-25T12:00:00Z, duration=120, category=attraction, price=PriceDto[amount=60.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Take a bus or auto-rickshaw.], ActivityDto[name=Lunch at Truffles, description=Contemporary, location=LocationDto[name=Truffles, address=51, 1st Main Road, Indiranagar, Bengaluru, Karnataka 560038, lat=12.9742, lng=77.6286, placeId=], startTime=2025-12-25T13:00:00Z, endTime=2025-12-25T14:30:00Z, duration=90, category=meal, price=PriceDto[amount=500.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take an auto-rickshaw or taxi.], ActivityDto[name=Visit Nandi Hills, description=Hill Station, location=LocationDto[name=Nandi Hills, address=Nandi Hills, Chikkaballapur, Karnataka 561201, lat=13.3545, lng=77.7578, placeId=], startTime=2025-12-25T15:30:00Z, endTime=2025-12-25T18:00:00Z, duration=150, category=attraction, price=PriceDto[amount=100.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Book a taxi for a round trip.], ActivityDto[name=Dinner at Saravana Bhavan, description=South Indian, location=LocationDto[name=Saravana Bhavan, address=11, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011, lat=12.9647, lng=77.5838, placeId=], startTime=2025-12-25T20:00:00Z, endTime=2025-12-25T21:30:00Z, duration=90, category=meal, price=PriceDto[amount=300.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take a taxi back to the hotel.]], accommodation=null, transportation=null, meals=null, notes=null), ItineraryDayDto(day=3, date=2025-12-26, location=Bengaluru, Karnataka, India, activities=[ActivityDto[name=Breakfast at Hotel Janatha, description=South Indian, location=LocationDto[name=Hotel Janatha, address=114, 2nd Main Road, V.V. Puram, Bengaluru, Karnataka 560011, lat=12.9647, lng=77.5838, placeId=], startTime=2025-12-26T08:00:00Z, endTime=2025-12-26T09:00:00Z, duration=60, category=meal, price=PriceDto[amount=150.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take an auto-rickshaw or walk if close.], ActivityDto[name=Visit Bannerghatta National Park, description=National Park, location=LocationDto[name=Bannerghatta National Park, address=Bannerghatta Road, Bannerghatta, Bengaluru, Karnataka 560083, lat=12.8738, lng=77.5783, placeId=], startTime=2025-12-26T10:00:00Z, endTime=2025-12-26T13:00:00Z, duration=180, category=attraction, price=PriceDto[amount=150.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Book a taxi for a round trip.], ActivityDto[name=Lunch at The Pecos, description=American, location=LocationDto[name=The Pecos, address=11, 100 Feet Road, Indiranagar, Bengaluru, Karnataka 560038, lat=12.9742, lng=77.6286, placeId=], startTime=2025-12-26T14:00:00Z, endTime=2025-12-26T15:30:00Z, duration=90, category=meal, price=PriceDto[amount=400.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take a taxi back to the hotel.], ActivityDto[name=Visit ISKCON Temple, description=Temple, location=LocationDto[name=ISKCON Temple, address=Hare Krishna Hill, Chord Road, Rajajinagar, Bengaluru, Karnataka 560010, lat=13.0394, lng=77.5488, placeId=], startTime=2025-12-26T16:30:00Z, endTime=2025-12-26T18:30:00Z, duration=120, category=attraction, price=PriceDto[amount=50.0, currency=INR, per=entry], bookingRequired=false, bookingUrl=, tips=Take a taxi or bus.], ActivityDto[name=Dinner at Hoopla, description=Contemporary, location=LocationDto[name=Hoopla, address=25, 100 Feet Road, Indiranagar, Bengaluru, Karnataka 560038, lat=12.9742, lng=77.6286, placeId=], startTime=2025-12-26T20:00:00Z, endTime=2025-12-26T21:30:00Z, duration=90, category=meal, price=PriceDto[amount=500.0, currency=INR, per=person], bookingRequired=false, bookingUrl=, tips=Take a taxi back to the hotel.]], accommodation=null, transportation=null, meals=null, notes=null)], agentResults={themes=[relaxation, nature, cuisine], currency=INR}, status=completed, createdAt=2025-09-24T12:23:10.909613Z, updatedAt=2025-09-24T12:23:10.909613Z, isPublic=false, shareToken=null)
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.PlannerAgent - =================================
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - PlannerAgent completed, database already updated
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Step 3: Running EnrichmentAgent
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - === AGENT EXECUTION START ===
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Agent Kind: planner
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Request Type: ApplyResult
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Request Data: null
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Request Details: null
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - =============================
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: queued
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent queued for execution
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:10.917639600Z
2025-09-24 17:53:10.917 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 0
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent started
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:10.917639600Z
2025-09-24 17:53:10.917 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Executing agent-specific logic for: planner
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - === ENRICHMENT AGENT PROCESSING ===
2025-09-24 17:53:10.917 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 10
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Loading itinerary
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: loading
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:12.034014800Z
2025-09-24 17:53:12.034 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 30
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Validating opening hours
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: validation
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:12.034014800Z
2025-09-24 17:53:12.034 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 50
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Calculating pacing
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: pacing
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:12.034014800Z
2025-09-24 17:53:12.034 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.034 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 70
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Computing transit durations
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: transit
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:12.035523400Z
2025-09-24 17:53:12.035 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 90
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Applying enrichments
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: applying
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:12.035523400Z
2025-09-24 17:53:12.035 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:12.035 [task-1] INFO  com.tripplanner.service.ChangeEngine - Applying changes for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.ChangeEngine - Unknown operation: update_edge
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.ChangeEngine - No-op ChangeSet: skipping version bump and revision save
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: running
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Enrichment complete
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: complete
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:12.453708300Z
2025-09-24 17:53:12.453 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - === ENRICHMENT COMPLETE ===
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Applied 14 enrichment operations
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - New version: 1
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - === PUBLISHING AGENT EVENT ===
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent ID: 42f3d4da-c832-4c78-b893-e2d45611d2e8
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Agent Kind: planner
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Status: succeeded
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Progress: 100
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Message: Agent completed successfully
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Step: null
2025-09-24 17:53:12.453 [task-1] INFO  com.tripplanner.service.AgentEventBus - Timestamp: 2025-09-24T12:23:12.453708300Z
2025-09-24 17:53:12.454 [task-1] WARN  com.tripplanner.service.AgentEventBus - No emitters found for itinerary: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.454 [task-1] INFO  com.tripplanner.service.AgentEventBus - ==============================
2025-09-24 17:53:12.454 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - === AGENT EXECUTION COMPLETED ===
2025-09-24 17:53:12.454 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Agent Kind: planner
2025-09-24 17:53:12.454 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Itinerary ID: it_c8666517-6111-4685-9123-7437d46a2600
2025-09-24 17:53:12.454 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Result Type: ApplyResult
2025-09-24 17:53:12.454 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - Result: com.tripplanner.service.ChangeEngine$ApplyResult@6134aa1b
2025-09-24 17:53:12.454 [task-1] INFO  com.tripplanner.agents.EnrichmentAgent - =================================
2025-09-24 17:53:13.557 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - === NORMALIZED ITINERARY GENERATION COMPLETE ===
2025-09-24 17:53:13.557 [task-1] INFO  com.tripplanner.agents.AgentOrchestrator - Final itinerary has 3 days
2025-09-24 18:12:46.567 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
